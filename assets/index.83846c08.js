(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function It(){}function si(t){return t()}function _r(){return Object.create(null)}function re(t){t.forEach(si)}function li(t){return typeof t=="function"}function _n(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Gi(t){return Object.keys(t).length===0}function k(t,e){t.appendChild(e)}function nt(t,e,n){t.insertBefore(e,n||null)}function et(t){t.parentNode.removeChild(t)}function ai(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function D(t){return document.createElement(t)}function vt(t){return document.createTextNode(t)}function Z(){return vt(" ")}function ui(){return vt("")}function gt(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function S(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Zi(t){return t===""?null:+t}function ji(t){return Array.from(t.childNodes)}function Dt(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function yr(t,e){t.value=e==null?"":e}function Rt(t,e,n,r){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function Qt(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e){r.selected=!0;return}}t.selectedIndex=-1}function De(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function Ji(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,r,e),i}let Pe;function Le(t){Pe=t}function fi(){if(!Pe)throw new Error("Function called outside component initialization");return Pe}function Gn(t){fi().$$.on_mount.push(t)}function $i(){const t=fi();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const o=Ji(e,n,{cancelable:r});return i.slice().forEach(s=>{s.call(t,o)}),!o.defaultPrevented}return!0}}const ze=[],te=[],Je=[],In=[],to=Promise.resolve();let On=!1;function eo(){On||(On=!0,to.then(ci))}function le(t){Je.push(t)}function wr(t){In.push(t)}const Rn=new Set;let Ye=0;function ci(){const t=Pe;do{for(;Ye<ze.length;){const e=ze[Ye];Ye++,Le(e),no(e.$$)}for(Le(null),ze.length=0,Ye=0;te.length;)te.pop()();for(let e=0;e<Je.length;e+=1){const n=Je[e];Rn.has(n)||(Rn.add(n),n())}Je.length=0}while(ze.length);for(;In.length;)In.pop()();On=!1,Rn.clear(),Le(t)}function no(t){if(t.fragment!==null){t.update(),re(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(le)}}const $e=new Set;let fe;function hi(){fe={r:0,c:[],p:fe}}function di(){fe.r||re(fe.c),fe=fe.p}function ee(t,e){t&&t.i&&($e.delete(t),t.i(e))}function he(t,e,n,r){if(t&&t.o){if($e.has(t))return;$e.add(t),fe.c.push(()=>{$e.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function vr(t,e,n){const r=t.$$.props[e];r!==void 0&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function Zn(t){t&&t.c()}function yn(t,e,n,r){const{fragment:i,after_update:o}=t.$$;i&&i.m(e,n),r||le(()=>{const s=t.$$.on_mount.map(si).filter(li);t.$$.on_destroy?t.$$.on_destroy.push(...s):re(s),t.$$.on_mount=[]}),o.forEach(le)}function wn(t,e){const n=t.$$;n.fragment!==null&&(re(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ro(t,e){t.$$.dirty[0]===-1&&(ze.push(t),eo(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function vn(t,e,n,r,i,o,s,a=[-1]){const u=Pe;Le(t);const l=t.$$={fragment:null,ctx:[],props:o,update:It,not_equal:i,bound:_r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:_r(),dirty:a,skip_bound:!1,root:e.target||u.$$.root};s&&s(l.root);let f=!1;if(l.ctx=n?n(t,e.props||{},(c,y,..._)=>{const M=_.length?_[0]:y;return l.ctx&&i(l.ctx[c],l.ctx[c]=M)&&(!l.skip_bound&&l.bound[c]&&l.bound[c](M),f&&ro(t,c)),y}):[],l.update(),f=!0,re(l.before_update),l.fragment=r?r(l.ctx):!1,e.target){if(e.hydrate){const c=ji(e.target);l.fragment&&l.fragment.l(c),c.forEach(et)}else l.fragment&&l.fragment.c();e.intro&&ee(t.$$.fragment),yn(t,e.target,e.anchor,e.customElement),ci()}Le(u)}class bn{$destroy(){wn(this,1),this.$destroy=It}$on(e,n){if(!li(n))return It;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!Gi(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var io=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},pi={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((n,r)=>{t.exports=r()})(io,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i,o=!r.document&&!!r.postMessage,s=r.IS_PAPA_WORKER||!1,a={},u=0,l={};function f(d){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(h){var b=U(h);b.chunkSize=parseInt(b.chunkSize),h.step||h.chunk||(b.chunkSize=null),this._handle=new X(b),(this._handle.streamer=this)._config=b}.call(this,d),this.parseChunk=function(h,b){var m=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<m){let q=this._config.newline;q||(R=this._config.quoteChar||'"',q=this._handle.guessLineEndings(h,R)),h=[...h.split(q).slice(m)].join(q)}this.isFirstChunk&&H(this._config.beforeFirstChunk)&&(R=this._config.beforeFirstChunk(h))!==void 0&&(h=R),this.isFirstChunk=!1,this._halted=!1;var m=this._partialLine+h,R=(this._partialLine="",this._handle.parse(m,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(h=R.meta.cursor,m=(this._finished||(this._partialLine=m.substring(h-this._baseIndex),this._baseIndex=h),R&&R.data&&(this._rowCount+=R.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),s)r.postMessage({results:R,workerId:l.WORKER_ID,finished:m});else if(H(this._config.chunk)&&!b){if(this._config.chunk(R,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=R=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(R.data),this._completeResults.errors=this._completeResults.errors.concat(R.errors),this._completeResults.meta=R.meta),this._completed||!m||!H(this._config.complete)||R&&R.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),m||R&&R.meta.paused||this._nextChunk(),R}this._halted=!0},this._sendError=function(h){H(this._config.error)?this._config.error(h):s&&this._config.error&&r.postMessage({workerId:l.WORKER_ID,error:h,finished:!1})}}function c(d){var h;(d=d||{}).chunkSize||(d.chunkSize=l.RemoteChunkSize),f.call(this,d),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(b){this._input=b,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(h=new XMLHttpRequest,this._config.withCredentials&&(h.withCredentials=this._config.withCredentials),o||(h.onload=lt(this._chunkLoaded,this),h.onerror=lt(this._chunkError,this)),h.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var b,m=this._config.downloadRequestHeaders;for(b in m)h.setRequestHeader(b,m[b])}var R;this._config.chunkSize&&(R=this._start+this._config.chunkSize-1,h.setRequestHeader("Range","bytes="+this._start+"-"+R));try{h.send(this._config.downloadRequestBody)}catch(q){this._chunkError(q.message)}o&&h.status===0&&this._chunkError()}},this._chunkLoaded=function(){h.readyState===4&&(h.status<200||400<=h.status?this._chunkError():(this._start+=this._config.chunkSize||h.responseText.length,this._finished=!this._config.chunkSize||this._start>=(b=>(b=b.getResponseHeader("Content-Range"))!==null?parseInt(b.substring(b.lastIndexOf("/")+1)):-1)(h),this.parseChunk(h.responseText)))},this._chunkError=function(b){b=h.statusText||b,this._sendError(new Error(b))}}function y(d){(d=d||{}).chunkSize||(d.chunkSize=l.LocalChunkSize),f.call(this,d);var h,b,m=typeof FileReader<"u";this.stream=function(R){this._input=R,b=R.slice||R.webkitSlice||R.mozSlice,m?((h=new FileReader).onload=lt(this._chunkLoaded,this),h.onerror=lt(this._chunkError,this)):h=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var R=this._input,q=(this._config.chunkSize&&(q=Math.min(this._start+this._config.chunkSize,this._input.size),R=b.call(R,this._start,q)),h.readAsText(R,this._config.encoding));m||this._chunkLoaded({target:{result:q}})},this._chunkLoaded=function(R){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(R.target.result)},this._chunkError=function(){this._sendError(h.error)}}function _(d){var h;f.call(this,d=d||{}),this.stream=function(b){return h=b,this._nextChunk()},this._nextChunk=function(){var b,m;if(!this._finished)return b=this._config.chunkSize,h=b?(m=h.substring(0,b),h.substring(b)):(m=h,""),this._finished=!h,this.parseChunk(m)}}function M(d){f.call(this,d=d||{});var h=[],b=!0,m=!1;this.pause=function(){f.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){f.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(R){this._input=R,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){m&&h.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),h.length?this.parseChunk(h.shift()):b=!0},this._streamData=lt(function(R){try{h.push(typeof R=="string"?R:R.toString(this._config.encoding)),b&&(b=!1,this._checkIsFinished(),this.parseChunk(h.shift()))}catch(q){this._streamError(q)}},this),this._streamError=lt(function(R){this._streamCleanUp(),this._sendError(R)},this),this._streamEnd=lt(function(){this._streamCleanUp(),m=!0,this._streamData("")},this),this._streamCleanUp=lt(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function X(d){var h,b,m,R,q=Math.pow(2,53),p=-q,A=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,g=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,v=this,I=0,x=0,F=!1,O=!1,V=[],B={data:[],errors:[],meta:{}};function K(Q){return d.skipEmptyLines==="greedy"?Q.join("").trim()==="":Q.length===1&&Q[0].length===0}function rt(){if(B&&m&&(ht("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),m=!1),d.skipEmptyLines&&(B.data=B.data.filter(function(dt){return!K(dt)})),ft()){let dt=function(yt,_t){H(d.transformHeader)&&(yt=d.transformHeader(yt,_t)),V.push(yt)};var j=dt;if(B)if(Array.isArray(B.data[0])){for(var Q=0;ft()&&Q<B.data.length;Q++)B.data[Q].forEach(dt);B.data.splice(0,1)}else B.data.forEach(dt)}function ot(dt,yt){for(var _t=d.header?{}:[],ct=0;ct<dt.length;ct++){var $=ct,w=dt[ct],w=((P,tt)=>(st=>(d.dynamicTypingFunction&&d.dynamicTyping[st]===void 0&&(d.dynamicTyping[st]=d.dynamicTypingFunction(st)),(d.dynamicTyping[st]||d.dynamicTyping)===!0))(P)?tt==="true"||tt==="TRUE"||tt!=="false"&&tt!=="FALSE"&&((st=>{if(A.test(st)&&(st=parseFloat(st),p<st&&st<q))return 1})(tt)?parseFloat(tt):g.test(tt)?new Date(tt):tt===""?null:tt):tt)($=d.header?ct>=V.length?"__parsed_extra":V[ct]:$,w=d.transform?d.transform(w,$):w);$==="__parsed_extra"?(_t[$]=_t[$]||[],_t[$].push(w)):_t[$]=w}return d.header&&(ct>V.length?ht("FieldMismatch","TooManyFields","Too many fields: expected "+V.length+" fields but parsed "+ct,x+yt):ct<V.length&&ht("FieldMismatch","TooFewFields","Too few fields: expected "+V.length+" fields but parsed "+ct,x+yt)),_t}var at;B&&(d.header||d.dynamicTyping||d.transform)&&(at=1,!B.data.length||Array.isArray(B.data[0])?(B.data=B.data.map(ot),at=B.data.length):B.data=ot(B.data,0),d.header&&B.meta&&(B.meta.fields=V),x+=at)}function ft(){return d.header&&V.length===0}function ht(Q,ot,at,j){Q={type:Q,code:ot,message:at},j!==void 0&&(Q.row=j),B.errors.push(Q)}H(d.step)&&(R=d.step,d.step=function(Q){B=Q,ft()?rt():(rt(),B.data.length!==0&&(I+=Q.data.length,d.preview&&I>d.preview?b.abort():(B.data=B.data[0],R(B,v))))}),this.parse=function(Q,ot,at){var j=d.quoteChar||'"',j=(d.newline||(d.newline=this.guessLineEndings(Q,j)),m=!1,d.delimiter?H(d.delimiter)&&(d.delimiter=d.delimiter(Q),B.meta.delimiter=d.delimiter):((j=((dt,yt,_t,ct,$)=>{var w,P,tt,st;$=$||[",","	","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var bt=0;bt<$.length;bt++){for(var wt,mt=$[bt],pt=0,T=0,L=0,W=(tt=void 0,new C({comments:ct,delimiter:mt,newline:yt,preview:10}).parse(dt)),ut=0;ut<W.data.length;ut++)_t&&K(W.data[ut])?L++:(wt=W.data[ut].length,T+=wt,tt===void 0?tt=wt:0<wt&&(pt+=Math.abs(wt-tt),tt=wt));0<W.data.length&&(T/=W.data.length-L),(P===void 0||pt<=P)&&(st===void 0||st<T)&&1.99<T&&(P=pt,w=mt,st=T)}return{successful:!!(d.delimiter=w),bestDelimiter:w}})(Q,d.newline,d.skipEmptyLines,d.comments,d.delimitersToGuess)).successful?d.delimiter=j.bestDelimiter:(m=!0,d.delimiter=l.DefaultDelimiter),B.meta.delimiter=d.delimiter),U(d));return d.preview&&d.header&&j.preview++,h=Q,b=new C(j),B=b.parse(h,ot,at),rt(),F?{meta:{paused:!0}}:B||{meta:{paused:!1}}},this.paused=function(){return F},this.pause=function(){F=!0,b.abort(),h=H(d.chunk)?"":h.substring(b.getCharIndex())},this.resume=function(){v.streamer._halted?(F=!1,v.streamer.parseChunk(h,!0)):setTimeout(v.resume,3)},this.aborted=function(){return O},this.abort=function(){O=!0,b.abort(),B.meta.aborted=!0,H(d.complete)&&d.complete(B),h=""},this.guessLineEndings=function(dt,j){dt=dt.substring(0,1048576);var j=new RegExp(E(j)+"([^]*?)"+E(j),"gm"),at=(dt=dt.replace(j,"")).split("\r"),j=dt.split(`
`),dt=1<j.length&&j[0].length<at[0].length;if(at.length===1||dt)return`
`;for(var yt=0,_t=0;_t<at.length;_t++)at[_t][0]===`
`&&yt++;return yt>=at.length/2?`\r
`:"\r"}}function E(d){return d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function C(d){var h=(d=d||{}).delimiter,b=d.newline,m=d.comments,R=d.step,q=d.preview,p=d.fastMode,A=null,g=!1,v=d.quoteChar==null?'"':d.quoteChar,I=v;if(d.escapeChar!==void 0&&(I=d.escapeChar),(typeof h!="string"||-1<l.BAD_DELIMITERS.indexOf(h))&&(h=","),m===h)throw new Error("Comment character same as delimiter");m===!0?m="#":(typeof m!="string"||-1<l.BAD_DELIMITERS.indexOf(m))&&(m=!1),b!==`
`&&b!=="\r"&&b!==`\r
`&&(b=`
`);var x=0,F=!1;this.parse=function(O,V,B){if(typeof O!="string")throw new Error("Input must be a string");var K=O.length,rt=h.length,ft=b.length,ht=m.length,Q=H(R),ot=[],at=[],j=[],dt=x=0;if(!O)return pt();if(p||p!==!1&&O.indexOf(v)===-1){for(var yt=O.split(b),_t=0;_t<yt.length;_t++){if(j=yt[_t],x+=j.length,_t!==yt.length-1)x+=b.length;else if(B)return pt();if(!m||j.substring(0,ht)!==m){if(Q){if(ot=[],st(j.split(h)),T(),F)return pt()}else st(j.split(h));if(q&&q<=_t)return ot=ot.slice(0,q),pt(!0)}}return pt()}for(var ct=O.indexOf(h,x),$=O.indexOf(b,x),w=new RegExp(E(I)+E(v),"g"),P=O.indexOf(v,x);;)if(O[x]===v)for(P=x,x++;;){if((P=O.indexOf(v,P+1))===-1)return B||at.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ot.length,index:x}),wt();if(P===K-1)return wt(O.substring(x,P).replace(w,v));if(v===I&&O[P+1]===I)P++;else if(v===I||P===0||O[P-1]!==I){ct!==-1&&ct<P+1&&(ct=O.indexOf(h,P+1));var tt=bt(($=$!==-1&&$<P+1?O.indexOf(b,P+1):$)===-1?ct:Math.min(ct,$));if(O.substr(P+1+tt,rt)===h){j.push(O.substring(x,P).replace(w,v)),O[x=P+1+tt+rt]!==v&&(P=O.indexOf(v,x)),ct=O.indexOf(h,x),$=O.indexOf(b,x);break}if(tt=bt($),O.substring(P+1+tt,P+1+tt+ft)===b){if(j.push(O.substring(x,P).replace(w,v)),mt(P+1+tt+ft),ct=O.indexOf(h,x),P=O.indexOf(v,x),Q&&(T(),F))return pt();if(q&&ot.length>=q)return pt(!0);break}at.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ot.length,index:x}),P++}}else if(m&&j.length===0&&O.substring(x,x+ht)===m){if($===-1)return pt();x=$+ft,$=O.indexOf(b,x),ct=O.indexOf(h,x)}else if(ct!==-1&&(ct<$||$===-1))j.push(O.substring(x,ct)),x=ct+rt,ct=O.indexOf(h,x);else{if($===-1)break;if(j.push(O.substring(x,$)),mt($+ft),Q&&(T(),F))return pt();if(q&&ot.length>=q)return pt(!0)}return wt();function st(L){ot.push(L),dt=x}function bt(L){var W=0;return W=L!==-1&&(L=O.substring(P+1,L))&&L.trim()===""?L.length:W}function wt(L){return B||(L===void 0&&(L=O.substring(x)),j.push(L),x=K,st(j),Q&&T()),pt()}function mt(L){x=L,st(j),j=[],$=O.indexOf(b,x)}function pt(L){if(d.header&&!V&&ot.length&&!g){var W=ot[0],ut={},J=new Set(W);let G=!1;for(let kt=0;kt<W.length;kt++){let xt=W[kt];if(ut[xt=H(d.transformHeader)?d.transformHeader(xt,kt):xt]){let Mt,St=ut[xt];for(;Mt=xt+"_"+St,St++,J.has(Mt););J.add(Mt),W[kt]=Mt,ut[xt]++,G=!0,(A=A===null?{}:A)[Mt]=xt}else ut[xt]=1,W[kt]=xt;J.add(xt)}G&&console.warn("Duplicate headers found and renamed."),g=!0}return{data:ot,errors:at,meta:{delimiter:h,linebreak:b,aborted:F,truncated:!!L,cursor:dt+(V||0),renamedHeaders:A}}}function T(){R(pt()),ot=[],at=[]}},this.abort=function(){F=!0},this.getCharIndex=function(){return x}}function N(d){var h=d.data,b=a[h.workerId],m=!1;if(h.error)b.userError(h.error,h.file);else if(h.results&&h.results.data){var R={abort:function(){m=!0,Y(h.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:z,resume:z};if(H(b.userStep)){for(var q=0;q<h.results.data.length&&(b.userStep({data:h.results.data[q],errors:h.results.errors,meta:h.results.meta},R),!m);q++);delete h.results}else H(b.userChunk)&&(b.userChunk(h.results,R,h.file),delete h.results)}h.finished&&!m&&Y(h.workerId,h.results)}function Y(d,h){var b=a[d];H(b.userComplete)&&b.userComplete(h),b.terminate(),delete a[d]}function z(){throw new Error("Not implemented.")}function U(d){if(typeof d!="object"||d===null)return d;var h,b=Array.isArray(d)?[]:{};for(h in d)b[h]=U(d[h]);return b}function lt(d,h){return function(){d.apply(h,arguments)}}function H(d){return typeof d=="function"}return l.parse=function(d,h){var b=(h=h||{}).dynamicTyping||!1;if(H(b)&&(h.dynamicTypingFunction=b,b={}),h.dynamicTyping=b,h.transform=!!H(h.transform)&&h.transform,!h.worker||!l.WORKERS_SUPPORTED)return b=null,l.NODE_STREAM_INPUT,typeof d=="string"?(d=(m=>m.charCodeAt(0)!==65279?m:m.slice(1))(d),b=new(h.download?c:_)(h)):d.readable===!0&&H(d.read)&&H(d.on)?b=new M(h):(r.File&&d instanceof File||d instanceof Object)&&(b=new y(h)),b.stream(d);(b=(()=>{var m;return!!l.WORKERS_SUPPORTED&&(m=(()=>{var R=r.URL||r.webkitURL||null,q=n.toString();return l.BLOB_URL||(l.BLOB_URL=R.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",q,")();"],{type:"text/javascript"})))})(),(m=new r.Worker(m)).onmessage=N,m.id=u++,a[m.id]=m)})()).userStep=h.step,b.userChunk=h.chunk,b.userComplete=h.complete,b.userError=h.error,h.step=H(h.step),h.chunk=H(h.chunk),h.complete=H(h.complete),h.error=H(h.error),delete h.worker,b.postMessage({input:d,config:h,workerId:b.id})},l.unparse=function(d,h){var b=!1,m=!0,R=",",q=`\r
`,p='"',A=p+p,g=!1,v=null,I=!1,x=((()=>{if(typeof h=="object"){if(typeof h.delimiter!="string"||l.BAD_DELIMITERS.filter(function(V){return h.delimiter.indexOf(V)!==-1}).length||(R=h.delimiter),typeof h.quotes!="boolean"&&typeof h.quotes!="function"&&!Array.isArray(h.quotes)||(b=h.quotes),typeof h.skipEmptyLines!="boolean"&&typeof h.skipEmptyLines!="string"||(g=h.skipEmptyLines),typeof h.newline=="string"&&(q=h.newline),typeof h.quoteChar=="string"&&(p=h.quoteChar),typeof h.header=="boolean"&&(m=h.header),Array.isArray(h.columns)){if(h.columns.length===0)throw new Error("Option columns is empty");v=h.columns}h.escapeChar!==void 0&&(A=h.escapeChar+p),h.escapeFormulae instanceof RegExp?I=h.escapeFormulae:typeof h.escapeFormulae=="boolean"&&h.escapeFormulae&&(I=/^[=+\-@\t\r].*$/)}})(),new RegExp(E(p),"g"));if(typeof d=="string"&&(d=JSON.parse(d)),Array.isArray(d)){if(!d.length||Array.isArray(d[0]))return F(null,d,g);if(typeof d[0]=="object")return F(v||Object.keys(d[0]),d,g)}else if(typeof d=="object")return typeof d.data=="string"&&(d.data=JSON.parse(d.data)),Array.isArray(d.data)&&(d.fields||(d.fields=d.meta&&d.meta.fields||v),d.fields||(d.fields=Array.isArray(d.data[0])?d.fields:typeof d.data[0]=="object"?Object.keys(d.data[0]):[]),Array.isArray(d.data[0])||typeof d.data[0]=="object"||(d.data=[d.data])),F(d.fields||[],d.data||[],g);throw new Error("Unable to serialize unrecognized input");function F(V,B,K){var rt="",ft=(typeof V=="string"&&(V=JSON.parse(V)),typeof B=="string"&&(B=JSON.parse(B)),Array.isArray(V)&&0<V.length),ht=!Array.isArray(B[0]);if(ft&&m){for(var Q=0;Q<V.length;Q++)0<Q&&(rt+=R),rt+=O(V[Q],Q);0<B.length&&(rt+=q)}for(var ot=0;ot<B.length;ot++){var at=(ft?V:B[ot]).length,j=!1,dt=ft?Object.keys(B[ot]).length===0:B[ot].length===0;if(K&&!ft&&(j=K==="greedy"?B[ot].join("").trim()==="":B[ot].length===1&&B[ot][0].length===0),K==="greedy"&&ft){for(var yt=[],_t=0;_t<at;_t++){var ct=ht?V[_t]:_t;yt.push(B[ot][ct])}j=yt.join("").trim()===""}if(!j){for(var $=0;$<at;$++){0<$&&!dt&&(rt+=R);var w=ft&&ht?V[$]:$;rt+=O(B[ot][w],$)}ot<B.length-1&&(!K||0<at&&!dt)&&(rt+=q)}}return rt}function O(V,B){var K,rt;return V==null?"":V.constructor===Date?JSON.stringify(V).slice(1,25):(rt=!1,I&&typeof V=="string"&&I.test(V)&&(V="'"+V,rt=!0),K=V.toString().replace(x,A),(rt=rt||b===!0||typeof b=="function"&&b(V,B)||Array.isArray(b)&&b[B]||((ft,ht)=>{for(var Q=0;Q<ht.length;Q++)if(-1<ft.indexOf(ht[Q]))return!0;return!1})(K,l.BAD_DELIMITERS)||-1<K.indexOf(R)||K.charAt(0)===" "||K.charAt(K.length-1)===" ")?p+K+p:K)}},l.RECORD_SEP=String.fromCharCode(30),l.UNIT_SEP=String.fromCharCode(31),l.BYTE_ORDER_MARK="\uFEFF",l.BAD_DELIMITERS=["\r",`
`,'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!o&&!!r.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=C,l.ParserHandle=X,l.NetworkStreamer=c,l.FileStreamer=y,l.StringStreamer=_,l.ReadableStreamStreamer=M,r.jQuery&&((i=r.jQuery).fn.parse=function(d){var h=d.config||{},b=[];return this.each(function(q){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var p=0;p<this.files.length;p++)b.push({file:this.files[p],inputElem:this,instanceConfig:i.extend({},h)})}),m(),this;function m(){if(b.length===0)H(d.complete)&&d.complete();else{var q,p,A,g,v=b[0];if(H(d.before)){var I=d.before(v.file,v.inputElem);if(typeof I=="object"){if(I.action==="abort")return q="AbortError",p=v.file,A=v.inputElem,g=I.reason,void(H(d.error)&&d.error({name:q},p,A,g));if(I.action==="skip")return void R();typeof I.config=="object"&&(v.instanceConfig=i.extend(v.instanceConfig,I.config))}else if(I==="skip")return void R()}var x=v.instanceConfig.complete;v.instanceConfig.complete=function(F){H(x)&&x(F,v.file,v.inputElem),R()},l.parse(v.file,v.instanceConfig)}}function R(){b.splice(0,1),m()}}),s&&(r.onmessage=function(d){d=d.data,l.WORKER_ID===void 0&&d&&(l.WORKER_ID=d.workerId),typeof d.input=="string"?r.postMessage({workerId:l.WORKER_ID,results:l.parse(d.input,d.config),finished:!0}):(r.File&&d.input instanceof File||d.input instanceof Object)&&(d=l.parse(d.input,d.config))&&r.postMessage({workerId:l.WORKER_ID,results:d,finished:!0})}),(c.prototype=Object.create(f.prototype)).constructor=c,(y.prototype=Object.create(f.prototype)).constructor=y,(_.prototype=Object.create(_.prototype)).constructor=_,(M.prototype=Object.create(f.prototype)).constructor=M,l})})(pi);const oo=pi.exports;function tn(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function so(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function mi(t){let e,n,r;t.length!==2?(e=tn,n=(a,u)=>tn(t(a),u),r=(a,u)=>t(a)-u):(e=t===tn||t===so?t:lo,n=t,r=t);function i(a,u,l=0,f=a.length){if(l<f){if(e(u,u)!==0)return f;do{const c=l+f>>>1;n(a[c],u)<0?l=c+1:f=c}while(l<f)}return l}function o(a,u,l=0,f=a.length){if(l<f){if(e(u,u)!==0)return f;do{const c=l+f>>>1;n(a[c],u)<=0?l=c+1:f=c}while(l<f)}return l}function s(a,u,l=0,f=a.length){const c=i(a,u,l,f-1);return c>l&&r(a[c-1],u)>-r(a[c],u)?c-1:c}return{left:i,center:s,right:o}}function lo(){return 0}function ao(t){return t===null?NaN:+t}const uo=mi(tn),fo=uo.right;mi(ao).center;const co=fo;class br extends Map{constructor(e,n=mo){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(kr(this,e))}has(e){return super.has(kr(this,e))}set(e,n){return super.set(ho(this,e),n)}delete(e){return super.delete(po(this,e))}}function kr({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function ho({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function po({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function mo(t){return t!==null&&typeof t=="object"?t.valueOf():t}var Ln=Math.sqrt(50),Pn=Math.sqrt(10),Fn=Math.sqrt(2);function go(t,e,n){var r,i=-1,o,s,a;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(o=t,t=e,e=o),(a=gi(t,e,n))===0||!isFinite(a))return[];if(a>0){let u=Math.round(t/a),l=Math.round(e/a);for(u*a<t&&++u,l*a>e&&--l,s=new Array(o=l-u+1);++i<o;)s[i]=(u+i)*a}else{a=-a;let u=Math.round(t*a),l=Math.round(e*a);for(u/a<t&&++u,l/a>e&&--l,s=new Array(o=l-u+1);++i<o;)s[i]=(u+i)/a}return r&&s.reverse(),s}function gi(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=Ln?10:o>=Pn?5:o>=Fn?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=Ln?10:o>=Pn?5:o>=Fn?2:1)}function _o(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=Ln?i*=10:o>=Pn?i*=5:o>=Fn&&(i*=2),e<t?-i:i}function Dn(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function xr(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function _i(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const Sr=Symbol("implicit");function yi(){var t=new br,e=[],n=[],r=Sr;function i(o){let s=t.get(o);if(s===void 0){if(r!==Sr)return r;t.set(o,s=e.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new br;for(const s of o)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return yi(e,n).unknown(r)},_i.apply(i,arguments),i}function jn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function wi(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function qe(){}var Fe=.7,ln=1/Fe,ve="\\s*([+-]?\\d+)\\s*",Ve="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Gt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yo=/^#([0-9a-f]{3,8})$/,wo=new RegExp(`^rgb\\(${ve},${ve},${ve}\\)$`),vo=new RegExp(`^rgb\\(${Gt},${Gt},${Gt}\\)$`),bo=new RegExp(`^rgba\\(${ve},${ve},${ve},${Ve}\\)$`),ko=new RegExp(`^rgba\\(${Gt},${Gt},${Gt},${Ve}\\)$`),xo=new RegExp(`^hsl\\(${Ve},${Gt},${Gt}\\)$`),So=new RegExp(`^hsla\\(${Ve},${Gt},${Gt},${Ve}\\)$`),Mr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};jn(qe,pe,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Cr,formatHex:Cr,formatHex8:Mo,formatHsl:Co,formatRgb:Er,toString:Er});function Cr(){return this.rgb().formatHex()}function Mo(){return this.rgb().formatHex8()}function Co(){return vi(this).formatHsl()}function Er(){return this.rgb().formatRgb()}function pe(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=yo.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Ar(e):n===3?new zt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?We(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?We(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=wo.exec(t))?new zt(e[1],e[2],e[3],1):(e=vo.exec(t))?new zt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=bo.exec(t))?We(e[1],e[2],e[3],e[4]):(e=ko.exec(t))?We(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=xo.exec(t))?Tr(e[1],e[2]/100,e[3]/100,1):(e=So.exec(t))?Tr(e[1],e[2]/100,e[3]/100,e[4]):Mr.hasOwnProperty(t)?Ar(Mr[t]):t==="transparent"?new zt(NaN,NaN,NaN,0):null}function Ar(t){return new zt(t>>16&255,t>>8&255,t&255,1)}function We(t,e,n,r){return r<=0&&(t=e=n=NaN),new zt(t,e,n,r)}function Eo(t){return t instanceof qe||(t=pe(t)),t?(t=t.rgb(),new zt(t.r,t.g,t.b,t.opacity)):new zt}function Vn(t,e,n,r){return arguments.length===1?Eo(t):new zt(t,e,n,r==null?1:r)}function zt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}jn(zt,Vn,wi(qe,{brighter(t){return t=t==null?ln:Math.pow(ln,t),new zt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Fe:Math.pow(Fe,t),new zt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new zt(de(this.r),de(this.g),de(this.b),an(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Rr,formatHex:Rr,formatHex8:Ao,formatRgb:Dr,toString:Dr}));function Rr(){return`#${ce(this.r)}${ce(this.g)}${ce(this.b)}`}function Ao(){return`#${ce(this.r)}${ce(this.g)}${ce(this.b)}${ce((isNaN(this.opacity)?1:this.opacity)*255)}`}function Dr(){const t=an(this.opacity);return`${t===1?"rgb(":"rgba("}${de(this.r)}, ${de(this.g)}, ${de(this.b)}${t===1?")":`, ${t})`}`}function an(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function de(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ce(t){return t=de(t),(t<16?"0":"")+t.toString(16)}function Tr(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Yt(t,e,n,r)}function vi(t){if(t instanceof Yt)return new Yt(t.h,t.s,t.l,t.opacity);if(t instanceof qe||(t=pe(t)),!t)return new Yt;if(t instanceof Yt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,u=(o+i)/2;return a?(e===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-e)/a+2:s=(e-n)/a+4,a/=u<.5?o+i:2-o-i,s*=60):a=u>0&&u<1?0:s,new Yt(s,a,u,t.opacity)}function Ro(t,e,n,r){return arguments.length===1?vi(t):new Yt(t,e,n,r==null?1:r)}function Yt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}jn(Yt,Ro,wi(qe,{brighter(t){return t=t==null?ln:Math.pow(ln,t),new Yt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Fe:Math.pow(Fe,t),new Yt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new zt(Tn(t>=240?t-240:t+120,i,r),Tn(t,i,r),Tn(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Yt(Nr(this.h),Ke(this.s),Ke(this.l),an(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=an(this.opacity);return`${t===1?"hsl(":"hsla("}${Nr(this.h)}, ${Ke(this.s)*100}%, ${Ke(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Nr(t){return t=(t||0)%360,t<0?t+360:t}function Ke(t){return Math.max(0,Math.min(1,t||0))}function Tn(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Jn=t=>()=>t;function Do(t,e){return function(n){return t+n*e}}function To(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function No(t){return(t=+t)==1?bi:function(e,n){return n-e?To(e,n,t):Jn(isNaN(e)?n:e)}}function bi(t,e){var n=e-t;return n?Do(t,n):Jn(isNaN(t)?e:t)}const un=function t(e){var n=No(e);function r(i,o){var s=n((i=Vn(i)).r,(o=Vn(o)).r),a=n(i.g,o.g),u=n(i.b,o.b),l=bi(i.opacity,o.opacity);return function(f){return i.r=s(f),i.g=a(f),i.b=u(f),i.opacity=l(f),i+""}}return r.gamma=t,r}(1);function zo(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function Io(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Oo(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=$n(t[s],e[s]);for(;s<n;++s)o[s]=e[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function Lo(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Ut(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Po(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=$n(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var Bn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Nn=new RegExp(Bn.source,"g");function Fo(t){return function(){return t}}function Vo(t){return function(e){return t(e)+""}}function ki(t,e){var n=Bn.lastIndex=Nn.lastIndex=0,r,i,o,s=-1,a=[],u=[];for(t=t+"",e=e+"";(r=Bn.exec(t))&&(i=Nn.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,u.push({i:s,x:Ut(r,i)})),n=Nn.lastIndex;return n<e.length&&(o=e.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?u[0]?Vo(u[0].x):Fo(e):(e=u.length,function(l){for(var f=0,c;f<e;++f)a[(c=u[f]).i]=c.x(l);return a.join("")})}function $n(t,e){var n=typeof e,r;return e==null||n==="boolean"?Jn(e):(n==="number"?Ut:n==="string"?(r=pe(e))?(e=r,un):ki:e instanceof pe?un:e instanceof Date?Lo:Io(e)?zo:Array.isArray(e)?Oo:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Po:Ut)(t,e)}function Bo(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var zr=180/Math.PI,qn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function xi(t,e,n,r,i,o){var s,a,u;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),t*r<e*n&&(t=-t,e=-e,u=-u,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*zr,skewX:Math.atan(u)*zr,scaleX:s,scaleY:a}}var Qe;function qo(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?qn:xi(e.a,e.b,e.c,e.d,e.e,e.f)}function Xo(t){return t==null||(Qe||(Qe=document.createElementNS("http://www.w3.org/2000/svg","g")),Qe.setAttribute("transform",t),!(t=Qe.transform.baseVal.consolidate()))?qn:(t=t.matrix,xi(t.a,t.b,t.c,t.d,t.e,t.f))}function Si(t,e,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,f,c,y,_,M){if(l!==c||f!==y){var X=_.push("translate(",null,e,null,n);M.push({i:X-4,x:Ut(l,c)},{i:X-2,x:Ut(f,y)})}else(c||y)&&_.push("translate("+c+e+y+n)}function s(l,f,c,y){l!==f?(l-f>180?f+=360:f-l>180&&(l+=360),y.push({i:c.push(i(c)+"rotate(",null,r)-2,x:Ut(l,f)})):f&&c.push(i(c)+"rotate("+f+r)}function a(l,f,c,y){l!==f?y.push({i:c.push(i(c)+"skewX(",null,r)-2,x:Ut(l,f)}):f&&c.push(i(c)+"skewX("+f+r)}function u(l,f,c,y,_,M){if(l!==c||f!==y){var X=_.push(i(_)+"scale(",null,",",null,")");M.push({i:X-4,x:Ut(l,c)},{i:X-2,x:Ut(f,y)})}else(c!==1||y!==1)&&_.push(i(_)+"scale("+c+","+y+")")}return function(l,f){var c=[],y=[];return l=t(l),f=t(f),o(l.translateX,l.translateY,f.translateX,f.translateY,c,y),s(l.rotate,f.rotate,c,y),a(l.skewX,f.skewX,c,y),u(l.scaleX,l.scaleY,f.scaleX,f.scaleY,c,y),l=f=null,function(_){for(var M=-1,X=y.length,E;++M<X;)c[(E=y[M]).i]=E.x(_);return c.join("")}}}var Ho=Si(qo,"px, ","px)","deg)"),Uo=Si(Xo,", ",")",")"),Yo=1e-12;function Ir(t){return((t=Math.exp(t))+1/t)/2}function Wo(t){return((t=Math.exp(t))-1/t)/2}function Ko(t){return((t=Math.exp(2*t))-1)/(t+1)}const Qo=function t(e,n,r){function i(o,s){var a=o[0],u=o[1],l=o[2],f=s[0],c=s[1],y=s[2],_=f-a,M=c-u,X=_*_+M*M,E,C;if(X<Yo)C=Math.log(y/l)/e,E=function(H){return[a+H*_,u+H*M,l*Math.exp(e*H*C)]};else{var N=Math.sqrt(X),Y=(y*y-l*l+r*X)/(2*l*n*N),z=(y*y-l*l-r*X)/(2*y*n*N),U=Math.log(Math.sqrt(Y*Y+1)-Y),lt=Math.log(Math.sqrt(z*z+1)-z);C=(lt-U)/e,E=function(H){var d=H*C,h=Ir(U),b=l/(n*N)*(h*Ko(e*d+U)-Wo(U));return[a+b*_,u+b*M,l*h/Ir(e*d+U)]}}return E.duration=C*1e3*e/Math.SQRT2,E}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,u=a*a;return t(s,a,u)},i}(Math.SQRT2,2,4);function Go(t){return function(){return t}}function Zo(t){return+t}var Or=[0,1];function ye(t){return t}function Xn(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Go(isNaN(e)?NaN:.5)}function jo(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Jo(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1];return i<r?(r=Xn(i,r),o=n(s,o)):(r=Xn(r,i),o=n(o,s)),function(a){return o(r(a))}}function $o(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=Xn(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(a){var u=co(t,a,1,r)-1;return o[u](i[u](a))}}function ts(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function es(){var t=Or,e=Or,n=$n,r,i,o,s=ye,a,u,l;function f(){var y=Math.min(t.length,e.length);return s!==ye&&(s=jo(t[0],t[y-1])),a=y>2?$o:Jo,u=l=null,c}function c(y){return y==null||isNaN(y=+y)?o:(u||(u=a(t.map(r),e,n)))(r(s(y)))}return c.invert=function(y){return s(i((l||(l=a(e,t.map(r),Ut)))(y)))},c.domain=function(y){return arguments.length?(t=Array.from(y,Zo),f()):t.slice()},c.range=function(y){return arguments.length?(e=Array.from(y),f()):e.slice()},c.rangeRound=function(y){return e=Array.from(y),n=Bo,f()},c.clamp=function(y){return arguments.length?(s=y?!0:ye,f()):s!==ye},c.interpolate=function(y){return arguments.length?(n=y,f()):n},c.unknown=function(y){return arguments.length?(o=y,c):o},function(y,_){return r=y,i=_,f()}}function ns(){return es()(ye,ye)}function rs(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function fn(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function be(t){return t=fn(Math.abs(t)),t?t[1]:NaN}function is(t,e){return function(n,r){for(var i=n.length,o=[],s=0,a=t[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),o.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=t[s=(s+1)%t.length];return o.reverse().join(e)}}function os(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var ss=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function cn(t){if(!(e=ss.exec(t)))throw new Error("invalid format: "+t);var e;return new tr({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}cn.prototype=tr.prototype;function tr(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}tr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ls(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Mi;function as(t,e){var n=fn(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Mi=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+fn(t,Math.max(0,e+o-1))[0]}function Lr(t,e){var n=fn(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Pr={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:rs,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Lr(t*100,e),r:Lr,s:as,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Fr(t){return t}var Vr=Array.prototype.map,Br=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function us(t){var e=t.grouping===void 0||t.thousands===void 0?Fr:is(Vr.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?Fr:os(Vr.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"\u2212":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function l(c){c=cn(c);var y=c.fill,_=c.align,M=c.sign,X=c.symbol,E=c.zero,C=c.width,N=c.comma,Y=c.precision,z=c.trim,U=c.type;U==="n"?(N=!0,U="g"):Pr[U]||(Y===void 0&&(Y=12),z=!0,U="g"),(E||y==="0"&&_==="=")&&(E=!0,y="0",_="=");var lt=X==="$"?n:X==="#"&&/[boxX]/.test(U)?"0"+U.toLowerCase():"",H=X==="$"?r:/[%p]/.test(U)?s:"",d=Pr[U],h=/[defgprs%]/.test(U);Y=Y===void 0?6:/[gprs]/.test(U)?Math.max(1,Math.min(21,Y)):Math.max(0,Math.min(20,Y));function b(m){var R=lt,q=H,p,A,g;if(U==="c")q=d(m)+q,m="";else{m=+m;var v=m<0||1/m<0;if(m=isNaN(m)?u:d(Math.abs(m),Y),z&&(m=ls(m)),v&&+m==0&&M!=="+"&&(v=!1),R=(v?M==="("?M:a:M==="-"||M==="("?"":M)+R,q=(U==="s"?Br[8+Mi/3]:"")+q+(v&&M==="("?")":""),h){for(p=-1,A=m.length;++p<A;)if(g=m.charCodeAt(p),48>g||g>57){q=(g===46?i+m.slice(p+1):m.slice(p))+q,m=m.slice(0,p);break}}}N&&!E&&(m=e(m,1/0));var I=R.length+m.length+q.length,x=I<C?new Array(C-I+1).join(y):"";switch(N&&E&&(m=e(x+m,x.length?C-q.length:1/0),x=""),_){case"<":m=R+m+q+x;break;case"=":m=R+x+m+q;break;case"^":m=x.slice(0,I=x.length>>1)+R+m+q+x.slice(I);break;default:m=x+R+m+q;break}return o(m)}return b.toString=function(){return c+""},b}function f(c,y){var _=l((c=cn(c),c.type="f",c)),M=Math.max(-8,Math.min(8,Math.floor(be(y)/3)))*3,X=Math.pow(10,-M),E=Br[8+M/3];return function(C){return _(X*C)+E}}return{format:l,formatPrefix:f}}var Ge,Ci,Ei;fs({thousands:",",grouping:[3],currency:["$",""]});function fs(t){return Ge=us(t),Ci=Ge.format,Ei=Ge.formatPrefix,Ge}function cs(t){return Math.max(0,-be(Math.abs(t)))}function hs(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(be(e)/3)))*3-be(Math.abs(t)))}function ds(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,be(e)-be(t))+1}function ps(t,e,n,r){var i=_o(t,e,n),o;switch(r=cn(r==null?",f":r),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=hs(i,s))&&(r.precision=o),Ei(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=ds(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=cs(i))&&(r.precision=o-(r.type==="%")*2);break}}return Ci(r)}function ms(t){var e=t.domain;return t.ticks=function(n){var r=e();return go(r[0],r[r.length-1],n==null?10:n)},t.tickFormat=function(n,r){var i=e();return ps(i[0],i[i.length-1],n==null?10:n,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,s=r[i],a=r[o],u,l,f=10;for(a<s&&(l=s,s=a,a=l,l=i,i=o,o=l);f-- >0;){if(l=gi(s,a,n),l===u)return r[i]=s,r[o]=a,e(r);if(l>0)s=Math.floor(s/l)*l,a=Math.ceil(a/l)*l;else if(l<0)s=Math.ceil(s*l)/l,a=Math.floor(a*l)/l;else break;u=l}return t},t}function en(){var t=ns();return t.copy=function(){return ts(t,en())},_i.apply(t,arguments),ms(t)}function gs(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const _s=gs("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");function ys(t){let e;return{c(){e=D("p"),e.textContent="Hover over a circle to see details here.",S(e,"class","svelte-1b5vncu")},m(n,r){nt(n,e,r)},p:It,d(n){n&&et(e)}}}function ws(t){let e,n=(t[5]?t[5](t[1],t[0][t[1]]):t[0][t[1]])+"",r,i,o,s=t[0].date.toISOString().split("T")[0]+"",a,u,l,f,c,y,_=t[0].text+"",M;function X(z,U){return z[0].is_retweet=="True"?bs:vs}let E=X(t),C=E(t),N=t[0].impressions&&qr(t),Y=t[6]&&Xr(t);return{c(){e=D("span"),r=vt(n),i=Z(),o=D("h2"),a=vt(s),u=Z(),C.c(),l=Z(),N&&N.c(),f=Z(),Y&&Y.c(),c=Z(),y=D("p"),M=vt(_),Rt(e,"background",t[2](t[0][t[1]])),S(e,"class","svelte-1b5vncu"),S(o,"class","svelte-1b5vncu"),S(y,"class","svelte-1b5vncu")},m(z,U){nt(z,e,U),k(e,r),nt(z,i,U),nt(z,o,U),k(o,a),nt(z,u,U),C.m(z,U),nt(z,l,U),N&&N.m(z,U),nt(z,f,U),Y&&Y.m(z,U),nt(z,c,U),nt(z,y,U),k(y,M)},p(z,U){U&35&&n!==(n=(z[5]?z[5](z[1],z[0][z[1]]):z[0][z[1]])+"")&&Dt(r,n),U&7&&Rt(e,"background",z[2](z[0][z[1]])),U&1&&s!==(s=z[0].date.toISOString().split("T")[0]+"")&&Dt(a,s),E!==(E=X(z))&&(C.d(1),C=E(z),C&&(C.c(),C.m(l.parentNode,l))),z[0].impressions?N?N.p(z,U):(N=qr(z),N.c(),N.m(f.parentNode,f)):N&&(N.d(1),N=null),z[6]?Y?Y.p(z,U):(Y=Xr(z),Y.c(),Y.m(c.parentNode,c)):Y&&(Y.d(1),Y=null),U&1&&_!==(_=z[0].text+"")&&Dt(M,_)},d(z){z&&et(e),z&&et(i),z&&et(o),z&&et(u),C.d(z),z&&et(l),N&&N.d(z),z&&et(f),Y&&Y.d(z),z&&et(c),z&&et(y)}}}function vs(t){let e;return{c(){e=D("p"),e.innerHTML='<em class="svelte-1b5vncu"><strong class="svelte-1b5vncu">Original Tweet</strong></em>',S(e,"class","svelte-1b5vncu")},m(n,r){nt(n,e,r)},d(n){n&&et(e)}}}function bs(t){let e;return{c(){e=D("p"),e.innerHTML='<em class="svelte-1b5vncu"><strong class="svelte-1b5vncu">Retweet</strong></em>',S(e,"class","svelte-1b5vncu")},m(n,r){nt(n,e,r)},d(n){n&&et(e)}}}function qr(t){let e,n,r,i=t[0].likes+"",o,s,a,u,l,f=t[0].retweets+"",c,y,_,M,X,E=t[0].impressions+"",C;return{c(){e=D("p"),n=D("em"),r=vt("Likes: "),o=vt(i),s=Z(),a=D("p"),u=D("em"),l=vt("Retweets: "),c=vt(f),y=Z(),_=D("p"),M=D("em"),X=vt("Impressions: "),C=vt(E),S(n,"class","svelte-1b5vncu"),S(e,"class","svelte-1b5vncu"),S(u,"class","svelte-1b5vncu"),S(a,"class","svelte-1b5vncu"),S(M,"class","svelte-1b5vncu"),S(_,"class","svelte-1b5vncu")},m(N,Y){nt(N,e,Y),k(e,n),k(n,r),k(n,o),nt(N,s,Y),nt(N,a,Y),k(a,u),k(u,l),k(u,c),nt(N,y,Y),nt(N,_,Y),k(_,M),k(M,X),k(M,C)},p(N,Y){Y&1&&i!==(i=N[0].likes+"")&&Dt(o,i),Y&1&&f!==(f=N[0].retweets+"")&&Dt(c,f),Y&1&&E!==(E=N[0].impressions+"")&&Dt(C,E)},d(N){N&&et(e),N&&et(s),N&&et(a),N&&et(y),N&&et(_)}}}function Xr(t){let e=t[6](t[1],t[0][t[1]]),n,r=e&&Hr(t);return{c(){r&&r.c(),n=ui()},m(i,o){r&&r.m(i,o),nt(i,n,o)},p(i,o){o&67&&(e=i[6](i[1],i[0][i[1]])),e?r?r.p(i,o):(r=Hr(i),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},d(i){r&&r.d(i),i&&et(n)}}}function Hr(t){let e,n,r=t[6](t[1],t[0][t[1]])+"",i;return{c(){e=D("p"),n=D("em"),i=vt(r),S(n,"class","svelte-1b5vncu"),S(e,"class","svelte-1b5vncu")},m(o,s){nt(o,e,s),k(e,n),k(n,i)},p(o,s){s&67&&r!==(r=o[6](o[1],o[0][o[1]])+"")&&Dt(i,r)},d(o){o&&et(e)}}}function ks(t){let e;function n(o,s){return o[0]?ws:ys}let r=n(t),i=r(t);return{c(){e=D("div"),i.c(),S(e,"class","detail-card svelte-1b5vncu"),Rt(e,"left",t[3]+"px"),Rt(e,"top",t[4]+"px")},m(o,s){nt(o,e,s),i.m(e,null)},p(o,[s]){r===(r=n(o))&&i?i.p(o,s):(i.d(1),i=r(o),i&&(i.c(),i.m(e,null))),s&8&&Rt(e,"left",o[3]+"px"),s&16&&Rt(e,"top",o[4]+"px")},i:It,o:It,d(o){o&&et(e),i.d()}}}function xs(t,e,n){let{hoveredData:r}=e,{domainColumn:i}=e,{data:o}=e,{colorScale:s}=e,{posX:a=0}=e,{posY:u=0}=e,{labelOverride:l=null}=e,{descriptionOverride:f=null}=e;return Gn(()=>{s.domain(o.map(c=>c[i]))}),t.$$set=c=>{"hoveredData"in c&&n(0,r=c.hoveredData),"domainColumn"in c&&n(1,i=c.domainColumn),"data"in c&&n(7,o=c.data),"colorScale"in c&&n(2,s=c.colorScale),"posX"in c&&n(3,a=c.posX),"posY"in c&&n(4,u=c.posY),"labelOverride"in c&&n(5,l=c.labelOverride),"descriptionOverride"in c&&n(6,f=c.descriptionOverride)},[r,i,s,a,u,l,f,o]}class Ss extends bn{constructor(e){super(),vn(this,e,xs,ks,_n,{hoveredData:0,domainColumn:1,data:7,colorScale:2,posX:3,posY:4,labelOverride:5,descriptionOverride:6})}}var Ms={value:()=>{}};function er(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new nn(n)}function nn(t){this._=t}function Cs(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}nn.prototype=er.prototype={constructor:nn,on:function(t,e){var n=this._,r=Cs(t+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(t=r[o]).type)&&(i=Es(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(i=(t=r[o]).type)n[i]=Ur(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Ur(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new nn(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function Es(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Ur(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Ms,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Hn="http://www.w3.org/1999/xhtml";const Yr={svg:"http://www.w3.org/2000/svg",xhtml:Hn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function kn(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Yr.hasOwnProperty(e)?{space:Yr[e],local:t}:t}function As(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Hn&&e.documentElement.namespaceURI===Hn?e.createElement(t):e.createElementNS(n,t)}}function Rs(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ai(t){var e=kn(t);return(e.local?Rs:As)(e)}function Ds(){}function nr(t){return t==null?Ds:function(){return this.querySelector(t)}}function Ts(t){typeof t!="function"&&(t=nr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=new Array(s),u,l,f=0;f<s;++f)(u=o[f])&&(l=t.call(u,u.__data__,f,o))&&("__data__"in u&&(l.__data__=u.__data__),a[f]=l);return new Pt(r,this._parents)}function Ns(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function zs(){return[]}function Ri(t){return t==null?zs:function(){return this.querySelectorAll(t)}}function Is(t){return function(){return Ns(t.apply(this,arguments))}}function Os(t){typeof t=="function"?t=Is(t):t=Ri(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var s=e[o],a=s.length,u,l=0;l<a;++l)(u=s[l])&&(r.push(t.call(u,u.__data__,l,s)),i.push(u));return new Pt(r,i)}function Di(t){return function(){return this.matches(t)}}function Ti(t){return function(e){return e.matches(t)}}var Ls=Array.prototype.find;function Ps(t){return function(){return Ls.call(this.children,t)}}function Fs(){return this.firstElementChild}function Vs(t){return this.select(t==null?Fs:Ps(typeof t=="function"?t:Ti(t)))}var Bs=Array.prototype.filter;function qs(){return Array.from(this.children)}function Xs(t){return function(){return Bs.call(this.children,t)}}function Hs(t){return this.selectAll(t==null?qs:Xs(typeof t=="function"?t:Ti(t)))}function Us(t){typeof t!="function"&&(t=Di(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=[],u,l=0;l<s;++l)(u=o[l])&&t.call(u,u.__data__,l,o)&&a.push(u);return new Pt(r,this._parents)}function Ni(t){return new Array(t.length)}function Ys(){return new Pt(this._enter||this._groups.map(Ni),this._parents)}function hn(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}hn.prototype={constructor:hn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Ws(t){return function(){return t}}function Ks(t,e,n,r,i,o){for(var s=0,a,u=e.length,l=o.length;s<l;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new hn(t,o[s]);for(;s<u;++s)(a=e[s])&&(i[s]=a)}function Qs(t,e,n,r,i,o,s){var a,u,l=new Map,f=e.length,c=o.length,y=new Array(f),_;for(a=0;a<f;++a)(u=e[a])&&(y[a]=_=s.call(u,u.__data__,a,e)+"",l.has(_)?i[a]=u:l.set(_,u));for(a=0;a<c;++a)_=s.call(t,o[a],a,o)+"",(u=l.get(_))?(r[a]=u,u.__data__=o[a],l.delete(_)):n[a]=new hn(t,o[a]);for(a=0;a<f;++a)(u=e[a])&&l.get(y[a])===u&&(i[a]=u)}function Gs(t){return t.__data__}function Zs(t,e){if(!arguments.length)return Array.from(this,Gs);var n=e?Qs:Ks,r=this._parents,i=this._groups;typeof t!="function"&&(t=Ws(t));for(var o=i.length,s=new Array(o),a=new Array(o),u=new Array(o),l=0;l<o;++l){var f=r[l],c=i[l],y=c.length,_=js(t.call(f,f&&f.__data__,l,r)),M=_.length,X=a[l]=new Array(M),E=s[l]=new Array(M),C=u[l]=new Array(y);n(f,c,X,E,C,_,e);for(var N=0,Y=0,z,U;N<M;++N)if(z=X[N]){for(N>=Y&&(Y=N+1);!(U=E[Y])&&++Y<M;);z._next=U||null}}return s=new Pt(s,r),s._enter=a,s._exit=u,s}function js(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Js(){return new Pt(this._exit||this._groups.map(Ni),this._parents)}function $s(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function tl(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),u=0;u<s;++u)for(var l=n[u],f=r[u],c=l.length,y=a[u]=new Array(c),_,M=0;M<c;++M)(_=l[M]||f[M])&&(y[M]=_);for(;u<i;++u)a[u]=n[u];return new Pt(a,this._parents)}function el(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function nl(t){t||(t=rl);function e(c,y){return c&&y?t(c.__data__,y.__data__):!c-!y}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,u=i[o]=new Array(a),l,f=0;f<a;++f)(l=s[f])&&(u[f]=l);u.sort(e)}return new Pt(i,this._parents).order()}function rl(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function il(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function ol(){return Array.from(this)}function sl(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function ll(){let t=0;for(const e of this)++t;return t}function al(){return!this.node()}function ul(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&t.call(a,a.__data__,o,i);return this}function fl(t){return function(){this.removeAttribute(t)}}function cl(t){return function(){this.removeAttributeNS(t.space,t.local)}}function hl(t,e){return function(){this.setAttribute(t,e)}}function dl(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function pl(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function ml(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function gl(t,e){var n=kn(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?cl:fl:typeof e=="function"?n.local?ml:pl:n.local?dl:hl)(n,e))}function zi(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function _l(t){return function(){this.style.removeProperty(t)}}function yl(t,e,n){return function(){this.style.setProperty(t,e,n)}}function wl(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function vl(t,e,n){return arguments.length>1?this.each((e==null?_l:typeof e=="function"?wl:yl)(t,e,n==null?"":n)):ke(this.node(),t)}function ke(t,e){return t.style.getPropertyValue(e)||zi(t).getComputedStyle(t,null).getPropertyValue(e)}function bl(t){return function(){delete this[t]}}function kl(t,e){return function(){this[t]=e}}function xl(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Sl(t,e){return arguments.length>1?this.each((e==null?bl:typeof e=="function"?xl:kl)(t,e)):this.node()[t]}function Ii(t){return t.trim().split(/^|\s+/)}function rr(t){return t.classList||new Oi(t)}function Oi(t){this._node=t,this._names=Ii(t.getAttribute("class")||"")}Oi.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Li(t,e){for(var n=rr(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Pi(t,e){for(var n=rr(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Ml(t){return function(){Li(this,t)}}function Cl(t){return function(){Pi(this,t)}}function El(t,e){return function(){(e.apply(this,arguments)?Li:Pi)(this,t)}}function Al(t,e){var n=Ii(t+"");if(arguments.length<2){for(var r=rr(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?El:e?Ml:Cl)(n,e))}function Rl(){this.textContent=""}function Dl(t){return function(){this.textContent=t}}function Tl(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function Nl(t){return arguments.length?this.each(t==null?Rl:(typeof t=="function"?Tl:Dl)(t)):this.node().textContent}function zl(){this.innerHTML=""}function Il(t){return function(){this.innerHTML=t}}function Ol(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function Ll(t){return arguments.length?this.each(t==null?zl:(typeof t=="function"?Ol:Il)(t)):this.node().innerHTML}function Pl(){this.nextSibling&&this.parentNode.appendChild(this)}function Fl(){return this.each(Pl)}function Vl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Bl(){return this.each(Vl)}function ql(t){var e=typeof t=="function"?t:Ai(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Xl(){return null}function Hl(t,e){var n=typeof t=="function"?t:Ai(t),r=e==null?Xl:typeof e=="function"?e:nr(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Ul(){var t=this.parentNode;t&&t.removeChild(this)}function Yl(){return this.each(Ul)}function Wl(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Kl(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ql(t){return this.select(t?Kl:Wl)}function Gl(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Zl(t){return function(e){t.call(this,e,this.__data__)}}function jl(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Jl(t){return function(){var e=this.__on;if(!!e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function $l(t,e,n){return function(){var r=this.__on,i,o=Zl(e);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function ta(t,e,n){var r=jl(t+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,f;u<l;++u)for(i=0,f=a[u];i<o;++i)if((s=r[i]).type===f.type&&s.name===f.name)return f.value}return}for(a=e?$l:Jl,i=0;i<o;++i)this.each(a(r[i],e,n));return this}function Fi(t,e,n){var r=zi(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function ea(t,e){return function(){return Fi(this,t,e)}}function na(t,e){return function(){return Fi(this,t,e.apply(this,arguments))}}function ra(t,e){return this.each((typeof e=="function"?na:ea)(t,e))}function*ia(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var Vi=[null];function Pt(t,e){this._groups=t,this._parents=e}function Xe(){return new Pt([[document.documentElement]],Vi)}function oa(){return this}Pt.prototype=Xe.prototype={constructor:Pt,select:Ts,selectAll:Os,selectChild:Vs,selectChildren:Hs,filter:Us,data:Zs,enter:Ys,exit:Js,join:$s,merge:tl,selection:oa,order:el,sort:nl,call:il,nodes:ol,node:sl,size:ll,empty:al,each:ul,attr:gl,style:vl,property:Sl,classed:Al,text:Nl,html:Ll,raise:Fl,lower:Bl,append:ql,insert:Hl,remove:Yl,clone:Ql,datum:Gl,on:ta,dispatch:ra,[Symbol.iterator]:ia};function se(t){return typeof t=="string"?new Pt([[document.querySelector(t)]],[document.documentElement]):new Pt([[t]],Vi)}function sa(t){let e;for(;e=t.sourceEvent;)t=e;return t}function ue(t,e){if(t=sa(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const Un={capture:!0,passive:!1};function Yn(t){t.preventDefault(),t.stopImmediatePropagation()}function la(t){var e=t.document.documentElement,n=se(t).on("dragstart.drag",Yn,Un);"onselectstart"in e?n.on("selectstart.drag",Yn,Un):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function aa(t,e){var n=t.document.documentElement,r=se(t).on("dragstart.drag",null);e&&(r.on("click.drag",Yn,Un),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var xe=0,Ie=0,Te=0,Bi=1e3,dn,Oe,pn=0,me=0,xn=0,Be=typeof performance=="object"&&performance.now?performance:Date,qi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ir(){return me||(qi(ua),me=Be.now()+xn)}function ua(){me=0}function mn(){this._call=this._time=this._next=null}mn.prototype=Xi.prototype={constructor:mn,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?ir():+n)+(e==null?0:+e),!this._next&&Oe!==this&&(Oe?Oe._next=this:dn=this,Oe=this),this._call=t,this._time=n,Wn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Wn())}};function Xi(t,e,n){var r=new mn;return r.restart(t,e,n),r}function fa(){ir(),++xe;for(var t=dn,e;t;)(e=me-t._time)>=0&&t._call.call(void 0,e),t=t._next;--xe}function Wr(){me=(pn=Be.now())+xn,xe=Ie=0;try{fa()}finally{xe=0,ha(),me=0}}function ca(){var t=Be.now(),e=t-pn;e>Bi&&(xn-=e,pn=t)}function ha(){for(var t,e=dn,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:dn=n);Oe=t,Wn(r)}function Wn(t){if(!xe){Ie&&(Ie=clearTimeout(Ie));var e=t-me;e>24?(t<1/0&&(Ie=setTimeout(Wr,t-Be.now()-xn)),Te&&(Te=clearInterval(Te))):(Te||(pn=Be.now(),Te=setInterval(ca,Bi)),xe=1,qi(Wr))}}function Kr(t,e,n){var r=new mn;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var da=er("start","end","cancel","interrupt"),pa=[],Hi=0,Qr=1,Kn=2,rn=3,Gr=4,Qn=5,on=6;function Sn(t,e,n,r,i,o){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;ma(t,n,{name:e,index:r,group:i,on:da,tween:pa,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Hi})}function or(t,e){var n=Wt(t,e);if(n.state>Hi)throw new Error("too late; already scheduled");return n}function Zt(t,e){var n=Wt(t,e);if(n.state>rn)throw new Error("too late; already running");return n}function Wt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function ma(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Xi(o,0,n.time);function o(l){n.state=Qr,n.timer.restart(s,n.delay,n.time),n.delay<=l&&s(l-n.delay)}function s(l){var f,c,y,_;if(n.state!==Qr)return u();for(f in r)if(_=r[f],_.name===n.name){if(_.state===rn)return Kr(s);_.state===Gr?(_.state=on,_.timer.stop(),_.on.call("interrupt",t,t.__data__,_.index,_.group),delete r[f]):+f<e&&(_.state=on,_.timer.stop(),_.on.call("cancel",t,t.__data__,_.index,_.group),delete r[f])}if(Kr(function(){n.state===rn&&(n.state=Gr,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=Kn,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Kn){for(n.state=rn,i=new Array(y=n.tween.length),f=0,c=-1;f<y;++f)(_=n.tween[f].value.call(t,t.__data__,n.index,n.group))&&(i[++c]=_);i.length=c+1}}function a(l){for(var f=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=Qn,1),c=-1,y=i.length;++c<y;)i[c].call(t,f);n.state===Qn&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=on,n.timer.stop(),delete r[e];for(var l in r)return;delete t.__transition}}function sn(t,e){var n=t.__transition,r,i,o=!0,s;if(!!n){e=e==null?null:e+"";for(s in n){if((r=n[s]).name!==e){o=!1;continue}i=r.state>Kn&&r.state<Qn,r.state=on,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]}o&&delete t.__transition}}function ga(t){return this.each(function(){sn(this,t)})}function _a(t,e){var n,r;return function(){var i=Zt(this,t),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function ya(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Zt(this,t),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:e,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===e){i[u]=a;break}u===l&&i.push(a)}o.tween=i}}function wa(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Wt(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((e==null?_a:ya)(n,t,e))}function sr(t,e,n){var r=t._id;return t.each(function(){var i=Zt(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Wt(i,r).value[e]}}function Ui(t,e){var n;return(typeof e=="number"?Ut:e instanceof pe?un:(n=pe(e))?(e=n,un):ki)(t,e)}function va(t){return function(){this.removeAttribute(t)}}function ba(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ka(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttribute(t);return s===i?null:s===r?o:o=e(r=s,n)}}function xa(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?o:o=e(r=s,n)}}function Sa(t,e,n){var r,i,o;return function(){var s,a=n(this),u;return a==null?void this.removeAttribute(t):(s=this.getAttribute(t),u=a+"",s===u?null:s===r&&u===i?o:(i=u,o=e(r=s,a)))}}function Ma(t,e,n){var r,i,o;return function(){var s,a=n(this),u;return a==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),u=a+"",s===u?null:s===r&&u===i?o:(i=u,o=e(r=s,a)))}}function Ca(t,e){var n=kn(t),r=n==="transform"?Uo:Ui;return this.attrTween(t,typeof e=="function"?(n.local?Ma:Sa)(n,r,sr(this,"attr."+t,e)):e==null?(n.local?ba:va)(n):(n.local?xa:ka)(n,r,e))}function Ea(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Aa(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Ra(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Aa(t,o)),n}return i._value=e,i}function Da(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Ea(t,o)),n}return i._value=e,i}function Ta(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=kn(t);return this.tween(n,(r.local?Ra:Da)(r,e))}function Na(t,e){return function(){or(this,t).delay=+e.apply(this,arguments)}}function za(t,e){return e=+e,function(){or(this,t).delay=e}}function Ia(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Na:za)(e,t)):Wt(this.node(),e).delay}function Oa(t,e){return function(){Zt(this,t).duration=+e.apply(this,arguments)}}function La(t,e){return e=+e,function(){Zt(this,t).duration=e}}function Pa(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Oa:La)(e,t)):Wt(this.node(),e).duration}function Fa(t,e){if(typeof e!="function")throw new Error;return function(){Zt(this,t).ease=e}}function Va(t){var e=this._id;return arguments.length?this.each(Fa(e,t)):Wt(this.node(),e).ease}function Ba(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Zt(this,t).ease=n}}function qa(t){if(typeof t!="function")throw new Error;return this.each(Ba(this._id,t))}function Xa(t){typeof t!="function"&&(t=Di(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=[],u,l=0;l<s;++l)(u=o[l])&&t.call(u,u.__data__,l,o)&&a.push(u);return new ne(r,this._parents,this._name,this._id)}function Ha(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var u=e[a],l=n[a],f=u.length,c=s[a]=new Array(f),y,_=0;_<f;++_)(y=u[_]||l[_])&&(c[_]=y);for(;a<r;++a)s[a]=e[a];return new ne(s,this._parents,this._name,this._id)}function Ua(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Ya(t,e,n){var r,i,o=Ua(e)?or:Zt;return function(){var s=o(this,t),a=s.on;a!==r&&(i=(r=a).copy()).on(e,n),s.on=i}}function Wa(t,e){var n=this._id;return arguments.length<2?Wt(this.node(),n).on.on(t):this.each(Ya(n,t,e))}function Ka(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Qa(){return this.on("end.remove",Ka(this._id))}function Ga(t){var e=this._name,n=this._id;typeof t!="function"&&(t=nr(t));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],u=a.length,l=o[s]=new Array(u),f,c,y=0;y<u;++y)(f=a[y])&&(c=t.call(f,f.__data__,y,a))&&("__data__"in f&&(c.__data__=f.__data__),l[y]=c,Sn(l[y],e,n,y,l,Wt(f,n)));return new ne(o,this._parents,e,n)}function Za(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ri(t));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var u=r[a],l=u.length,f,c=0;c<l;++c)if(f=u[c]){for(var y=t.call(f,f.__data__,c,u),_,M=Wt(f,n),X=0,E=y.length;X<E;++X)(_=y[X])&&Sn(_,e,n,X,y,M);o.push(y),s.push(f)}return new ne(o,s,e,n)}var ja=Xe.prototype.constructor;function Ja(){return new ja(this._groups,this._parents)}function $a(t,e){var n,r,i;return function(){var o=ke(this,t),s=(this.style.removeProperty(t),ke(this,t));return o===s?null:o===n&&s===r?i:i=e(n=o,r=s)}}function Yi(t){return function(){this.style.removeProperty(t)}}function tu(t,e,n){var r,i=n+"",o;return function(){var s=ke(this,t);return s===i?null:s===r?o:o=e(r=s,n)}}function eu(t,e,n){var r,i,o;return function(){var s=ke(this,t),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(t),ke(this,t))),s===u?null:s===r&&u===i?o:(i=u,o=e(r=s,a))}}function nu(t,e){var n,r,i,o="style."+e,s="end."+o,a;return function(){var u=Zt(this,t),l=u.on,f=u.value[o]==null?a||(a=Yi(e)):void 0;(l!==n||i!==f)&&(r=(n=l).copy()).on(s,i=f),u.on=r}}function ru(t,e,n){var r=(t+="")=="transform"?Ho:Ui;return e==null?this.styleTween(t,$a(t,r)).on("end.style."+t,Yi(t)):typeof e=="function"?this.styleTween(t,eu(t,r,sr(this,"style."+t,e))).each(nu(this._id,t)):this.styleTween(t,tu(t,r,e),n).on("end.style."+t,null)}function iu(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function ou(t,e,n){var r,i;function o(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&iu(t,s,n)),r}return o._value=e,o}function su(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,ou(t,e,n==null?"":n))}function lu(t){return function(){this.textContent=t}}function au(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function uu(t){return this.tween("text",typeof t=="function"?au(sr(this,"text",t)):lu(t==null?"":t+""))}function fu(t){return function(e){this.textContent=t.call(this,e)}}function cu(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&fu(i)),e}return r._value=t,r}function hu(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,cu(t))}function du(){for(var t=this._name,e=this._id,n=Wi(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,u,l=0;l<a;++l)if(u=s[l]){var f=Wt(u,e);Sn(u,t,n,l,s,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new ne(r,this._parents,t,n)}function pu(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},u={value:function(){--i===0&&o()}};n.each(function(){var l=Zt(this,r),f=l.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(u)),l.on=e}),i===0&&o()})}var mu=0;function ne(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Wi(){return++mu}var Jt=Xe.prototype;ne.prototype={constructor:ne,select:Ga,selectAll:Za,selectChild:Jt.selectChild,selectChildren:Jt.selectChildren,filter:Xa,merge:Ha,selection:Ja,transition:du,call:Jt.call,nodes:Jt.nodes,node:Jt.node,size:Jt.size,empty:Jt.empty,each:Jt.each,on:Wa,attr:Ca,attrTween:Ta,style:ru,styleTween:su,text:uu,textTween:hu,remove:Qa,tween:wa,delay:Ia,duration:Pa,ease:Va,easeVarying:qa,end:pu,[Symbol.iterator]:Jt[Symbol.iterator]};function gu(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var _u={time:null,delay:0,duration:250,ease:gu};function yu(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function wu(t){var e,n;t instanceof ne?(e=t._id,t=t._name):(e=Wi(),(n=_u).time=ir(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,u,l=0;l<a;++l)(u=s[l])&&Sn(u,t,e,l,s,n||yu(u,e));return new ne(r,this._parents,t,e)}Xe.prototype.interrupt=ga;Xe.prototype.transition=wu;const Ze=t=>()=>t;function vu(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function $t(t,e,n){this.k=t,this.x=e,this.y=n}$t.prototype={constructor:$t,scale:function(t){return t===1?this:new $t(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new $t(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var gn=new $t(1,0,0);$t.prototype;function zn(t){t.stopImmediatePropagation()}function Ne(t){t.preventDefault(),t.stopImmediatePropagation()}function bu(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function ku(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Zr(){return this.__zoom||gn}function xu(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Su(){return navigator.maxTouchPoints||"ontouchstart"in this}function Mu(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function Cu(){var t=bu,e=ku,n=Mu,r=xu,i=Su,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,u=Qo,l=er("start","zoom","end"),f,c,y,_=500,M=150,X=0,E=10;function C(p){p.property("__zoom",Zr).on("wheel.zoom",d,{passive:!1}).on("mousedown.zoom",h).on("dblclick.zoom",b).filter(i).on("touchstart.zoom",m).on("touchmove.zoom",R).on("touchend.zoom touchcancel.zoom",q).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}C.transform=function(p,A,g,v){var I=p.selection?p.selection():p;I.property("__zoom",Zr),p!==I?U(p,A,g,v):I.interrupt().each(function(){lt(this,arguments).event(v).start().zoom(null,typeof A=="function"?A.apply(this,arguments):A).end()})},C.scaleBy=function(p,A,g,v){C.scaleTo(p,function(){var I=this.__zoom.k,x=typeof A=="function"?A.apply(this,arguments):A;return I*x},g,v)},C.scaleTo=function(p,A,g,v){C.transform(p,function(){var I=e.apply(this,arguments),x=this.__zoom,F=g==null?z(I):typeof g=="function"?g.apply(this,arguments):g,O=x.invert(F),V=typeof A=="function"?A.apply(this,arguments):A;return n(Y(N(x,V),F,O),I,s)},g,v)},C.translateBy=function(p,A,g,v){C.transform(p,function(){return n(this.__zoom.translate(typeof A=="function"?A.apply(this,arguments):A,typeof g=="function"?g.apply(this,arguments):g),e.apply(this,arguments),s)},null,v)},C.translateTo=function(p,A,g,v,I){C.transform(p,function(){var x=e.apply(this,arguments),F=this.__zoom,O=v==null?z(x):typeof v=="function"?v.apply(this,arguments):v;return n(gn.translate(O[0],O[1]).scale(F.k).translate(typeof A=="function"?-A.apply(this,arguments):-A,typeof g=="function"?-g.apply(this,arguments):-g),x,s)},v,I)};function N(p,A){return A=Math.max(o[0],Math.min(o[1],A)),A===p.k?p:new $t(A,p.x,p.y)}function Y(p,A,g){var v=A[0]-g[0]*p.k,I=A[1]-g[1]*p.k;return v===p.x&&I===p.y?p:new $t(p.k,v,I)}function z(p){return[(+p[0][0]+ +p[1][0])/2,(+p[0][1]+ +p[1][1])/2]}function U(p,A,g,v){p.on("start.zoom",function(){lt(this,arguments).event(v).start()}).on("interrupt.zoom end.zoom",function(){lt(this,arguments).event(v).end()}).tween("zoom",function(){var I=this,x=arguments,F=lt(I,x).event(v),O=e.apply(I,x),V=g==null?z(O):typeof g=="function"?g.apply(I,x):g,B=Math.max(O[1][0]-O[0][0],O[1][1]-O[0][1]),K=I.__zoom,rt=typeof A=="function"?A.apply(I,x):A,ft=u(K.invert(V).concat(B/K.k),rt.invert(V).concat(B/rt.k));return function(ht){if(ht===1)ht=rt;else{var Q=ft(ht),ot=B/Q[2];ht=new $t(ot,V[0]-Q[0]*ot,V[1]-Q[1]*ot)}F.zoom(null,ht)}})}function lt(p,A,g){return!g&&p.__zooming||new H(p,A)}function H(p,A){this.that=p,this.args=A,this.active=0,this.sourceEvent=null,this.extent=e.apply(p,A),this.taps=0}H.prototype={event:function(p){return p&&(this.sourceEvent=p),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(p,A){return this.mouse&&p!=="mouse"&&(this.mouse[1]=A.invert(this.mouse[0])),this.touch0&&p!=="touch"&&(this.touch0[1]=A.invert(this.touch0[0])),this.touch1&&p!=="touch"&&(this.touch1[1]=A.invert(this.touch1[0])),this.that.__zoom=A,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(p){var A=se(this.that).datum();l.call(p,this.that,new vu(p,{sourceEvent:this.sourceEvent,target:C,type:p,transform:this.that.__zoom,dispatch:l}),A)}};function d(p,...A){if(!t.apply(this,arguments))return;var g=lt(this,A).event(p),v=this.__zoom,I=Math.max(o[0],Math.min(o[1],v.k*Math.pow(2,r.apply(this,arguments)))),x=ue(p);if(g.wheel)(g.mouse[0][0]!==x[0]||g.mouse[0][1]!==x[1])&&(g.mouse[1]=v.invert(g.mouse[0]=x)),clearTimeout(g.wheel);else{if(v.k===I)return;g.mouse=[x,v.invert(x)],sn(this),g.start()}Ne(p),g.wheel=setTimeout(F,M),g.zoom("mouse",n(Y(N(v,I),g.mouse[0],g.mouse[1]),g.extent,s));function F(){g.wheel=null,g.end()}}function h(p,...A){if(y||!t.apply(this,arguments))return;var g=p.currentTarget,v=lt(this,A,!0).event(p),I=se(p.view).on("mousemove.zoom",V,!0).on("mouseup.zoom",B,!0),x=ue(p,g),F=p.clientX,O=p.clientY;la(p.view),zn(p),v.mouse=[x,this.__zoom.invert(x)],sn(this),v.start();function V(K){if(Ne(K),!v.moved){var rt=K.clientX-F,ft=K.clientY-O;v.moved=rt*rt+ft*ft>X}v.event(K).zoom("mouse",n(Y(v.that.__zoom,v.mouse[0]=ue(K,g),v.mouse[1]),v.extent,s))}function B(K){I.on("mousemove.zoom mouseup.zoom",null),aa(K.view,v.moved),Ne(K),v.event(K).end()}}function b(p,...A){if(!!t.apply(this,arguments)){var g=this.__zoom,v=ue(p.changedTouches?p.changedTouches[0]:p,this),I=g.invert(v),x=g.k*(p.shiftKey?.5:2),F=n(Y(N(g,x),v,I),e.apply(this,A),s);Ne(p),a>0?se(this).transition().duration(a).call(U,F,v,p):se(this).call(C.transform,F,v,p)}}function m(p,...A){if(!!t.apply(this,arguments)){var g=p.touches,v=g.length,I=lt(this,A,p.changedTouches.length===v).event(p),x,F,O,V;for(zn(p),F=0;F<v;++F)O=g[F],V=ue(O,this),V=[V,this.__zoom.invert(V),O.identifier],I.touch0?!I.touch1&&I.touch0[2]!==V[2]&&(I.touch1=V,I.taps=0):(I.touch0=V,x=!0,I.taps=1+!!f);f&&(f=clearTimeout(f)),x&&(I.taps<2&&(c=V[0],f=setTimeout(function(){f=null},_)),sn(this),I.start())}}function R(p,...A){if(!!this.__zooming){var g=lt(this,A).event(p),v=p.changedTouches,I=v.length,x,F,O,V;for(Ne(p),x=0;x<I;++x)F=v[x],O=ue(F,this),g.touch0&&g.touch0[2]===F.identifier?g.touch0[0]=O:g.touch1&&g.touch1[2]===F.identifier&&(g.touch1[0]=O);if(F=g.that.__zoom,g.touch1){var B=g.touch0[0],K=g.touch0[1],rt=g.touch1[0],ft=g.touch1[1],ht=(ht=rt[0]-B[0])*ht+(ht=rt[1]-B[1])*ht,Q=(Q=ft[0]-K[0])*Q+(Q=ft[1]-K[1])*Q;F=N(F,Math.sqrt(ht/Q)),O=[(B[0]+rt[0])/2,(B[1]+rt[1])/2],V=[(K[0]+ft[0])/2,(K[1]+ft[1])/2]}else if(g.touch0)O=g.touch0[0],V=g.touch0[1];else return;g.zoom("touch",n(Y(F,O,V),g.extent,s))}}function q(p,...A){if(!!this.__zooming){var g=lt(this,A).event(p),v=p.changedTouches,I=v.length,x,F;for(zn(p),y&&clearTimeout(y),y=setTimeout(function(){y=null},_),x=0;x<I;++x)F=v[x],g.touch0&&g.touch0[2]===F.identifier?delete g.touch0:g.touch1&&g.touch1[2]===F.identifier&&delete g.touch1;if(g.touch1&&!g.touch0&&(g.touch0=g.touch1,delete g.touch1),g.touch0)g.touch0[1]=this.__zoom.invert(g.touch0[0]);else if(g.end(),g.taps===2&&(F=ue(F,this),Math.hypot(c[0]-F[0],c[1]-F[1])<E)){var O=se(this).on("dblclick.zoom");O&&O.apply(this,arguments)}}}return C.wheelDelta=function(p){return arguments.length?(r=typeof p=="function"?p:Ze(+p),C):r},C.filter=function(p){return arguments.length?(t=typeof p=="function"?p:Ze(!!p),C):t},C.touchable=function(p){return arguments.length?(i=typeof p=="function"?p:Ze(!!p),C):i},C.extent=function(p){return arguments.length?(e=typeof p=="function"?p:Ze([[+p[0][0],+p[0][1]],[+p[1][0],+p[1][1]]]),C):e},C.scaleExtent=function(p){return arguments.length?(o[0]=+p[0],o[1]=+p[1],C):[o[0],o[1]]},C.translateExtent=function(p){return arguments.length?(s[0][0]=+p[0][0],s[1][0]=+p[1][0],s[0][1]=+p[0][1],s[1][1]=+p[1][1],C):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},C.constrain=function(p){return arguments.length?(n=p,C):n},C.duration=function(p){return arguments.length?(a=+p,C):a},C.interpolate=function(p){return arguments.length?(u=p,C):u},C.on=function(){var p=l.on.apply(l,arguments);return p===l?C:p},C.clickDistance=function(p){return arguments.length?(X=(p=+p)*p,C):Math.sqrt(X)},C.tapDistance=function(p){return arguments.length?(E=+p,C):E},C}function jr(t){let e,n;return e=new Ss({props:{hoveredData:t[6],data:t[0],domainColumn:t[1],colorScale:t[9],posX:t[7],posY:t[8]}}),{c(){Zn(e.$$.fragment)},m(r,i){yn(e,r,i),n=!0},p(r,i){const o={};i[0]&64&&(o.hoveredData=r[6]),i[0]&1&&(o.data=r[0]),i[0]&2&&(o.domainColumn=r[1]),i[0]&512&&(o.colorScale=r[9]),i[0]&128&&(o.posX=r[7]),i[0]&256&&(o.posY=r[8]),e.$set(o)},i(r){n||(ee(e.$$.fragment,r),n=!0)},o(r){he(e.$$.fragment,r),n=!1},d(r){wn(e,r)}}}function Eu(t){let e,n,r,i,o,s,a,u,l,f,c,y,_,M=t[6]&&jr(t);return{c(){e=D("div"),n=D("div"),r=D("button"),r.textContent="+",i=Z(),o=D("button"),o.textContent="\u2212",s=Z(),a=D("button"),a.textContent="\u27F2",u=Z(),l=D("canvas"),f=Z(),M&&M.c(),S(r,"class","zoom-btn svelte-1q7voxg"),S(r,"aria-label","Zoom in"),S(r,"title","Zoom in"),S(o,"class","zoom-btn svelte-1q7voxg"),S(o,"aria-label","Zoom out"),S(o,"title","Zoom out"),S(a,"class","zoom-btn svelte-1q7voxg"),S(a,"aria-label","Reset zoom"),S(a,"title","Reset zoom"),S(n,"class","zoom-controls svelte-1q7voxg"),S(n,"aria-label","Zoom controls"),S(l,"width",t[2]),S(l,"height",t[3]),S(l,"class","svelte-1q7voxg"),S(e,"class","chart-container svelte-1q7voxg")},m(X,E){nt(X,e,E),k(e,n),k(n,r),k(n,i),k(n,o),k(n,s),k(n,a),k(e,u),k(e,l),t[32](l),k(e,f),M&&M.m(e,null),t[33](e),c=!0,y||(_=[gt(r,"click",t[13]),gt(o,"click",t[14]),gt(a,"click",t[15]),gt(l,"mousemove",t[10]),gt(l,"mouseleave",t[12]),gt(l,"click",t[11])],y=!0)},p(X,E){(!c||E[0]&4)&&S(l,"width",X[2]),(!c||E[0]&8)&&S(l,"height",X[3]),X[6]?M?(M.p(X,E),E[0]&64&&ee(M,1)):(M=jr(X),M.c(),ee(M,1),M.m(e,null)):M&&(hi(),he(M,1,1,()=>{M=null}),di())},i(X){c||(ee(M),c=!0)},o(X){he(M),c=!1},d(X){X&&et(e),t[32](null),M&&M.d(),t[33](null),y=!1,re(_)}}}const Au=6,Ru=.5,Du=20,Jr=280,$r=160,Tu=3,Nu=40;function je(t,e){if(!e||!t)return!1;try{return new RegExp(e,"i").test(t)}catch{return t.toLowerCase().includes(e.toLowerCase())}}function zu(t,e,n){let r,i,o,s,a,u,l,f,c,y,{data:_=[]}=e,{domainColumn:M=""}=e,{opacity:X=1}=e,{selectedValues:E=new Set}=e,{searchQuery:C=""}=e,{showAnnotations:N=!0}=e,{highlightedData:Y=[]}=e,{startDate:z=null}=e,{endDate:U=null}=e,{uniqueValues:lt=[]}=e,{sizeByColumn:H=""}=e,d=[],h,b,m,R=800,q=600;const p={top:20,right:20,bottom:20,left:20};let A=null,g=null,v=gn,I,x,F=0,O=0,V;function B(w){return y&&H&&w[H]!=null?y(+w[H]||0):Au}let K=1;function rt(){if(!h||!b)return;const w=b.getBoundingClientRect();w.width>0&&w.height>0&&(n(2,R=Math.floor(w.width)),n(3,q=Math.floor(w.height))),K=Math.max(window.devicePixelRatio||1,1),n(4,h.style.width="100%",h),n(4,h.style.height="100%",h),n(4,h.width=Math.max(1,Math.floor(R*K)),h),n(4,h.height=Math.max(1,Math.floor(q*K)),h),n(25,m=h.getContext("2d")),m.setTransform(K,0,0,K,0,0)}function ft(){if(!(!m||!_.length)){if(m.clearRect(0,0,R,q),m.save(),m.translate(v.x,v.y),m.scale(v.k,v.k),_.forEach(w=>{m.beginPath();const P=B(w);m.arc(p.left+u(w.x),p.top+c(w.y),Math.max(.5,P/v.k),0,Math.PI*2),n(25,m.fillStyle=V(w[M]),m);const tt=.9,st=Math.max(0,Math.min(1,X));n(25,m.globalAlpha=w.isActive?tt:st,m),m.fill(),n(25,m.globalAlpha=.2,m)}),N&&d.forEach(w=>{n(25,m.globalAlpha=1,m),m.beginPath(),m.arc(w.x,w.y,w.radius,0,Math.PI*2),n(25,m.strokeStyle="red",m),n(25,m.lineWidth=2,m),m.setLineDash([5,5]),m.stroke();const P=180,tt=12;n(25,m.font="16px Arial",m);const st=w.x+w.label_x,bt=w.y+w.label_y;let wt=0,mt=0,pt=[];if(w.label){const St=w.label.split(" ");let Et="";St.forEach((Ot,Xt)=>{const At=Et+Ot+" ";m.measureText(At).width>P&&Xt>0?(pt.push(Et),wt=Math.max(wt,m.measureText(Et).width),Et=Ot+" "):Et=At}),pt.push(Et),wt=Math.max(wt,m.measureText(Et).width),mt=tt*pt.length}const T=st,L=bt-tt,W=wt,ut=mt;let J,G;w.x<T?J=T:w.x>T+W?J=T+W:J=w.x,w.y<L?G=L:w.y>L+ut?G=L+ut:G=w.y;const kt=Math.atan2(G-w.y,J-w.x),xt=w.x+w.radius*Math.cos(kt),Mt=w.y+w.radius*Math.sin(kt);if(m.setLineDash([]),m.beginPath(),m.moveTo(xt,Mt),m.lineTo(J,G),n(25,m.strokeStyle="red",m),n(25,m.lineWidth=1,m),m.stroke(),w.label){n(25,m.font="16px Arial",m),n(25,m.fillStyle="red",m);const St=16;pt.forEach((Et,Ot)=>{m.fillText(Et,st,bt+Ot*St)})}}),m.setLineDash([]),A){const w=p.left+u(A.x),P=p.top+c(A.y),tt=B(A);m.beginPath(),m.arc(w,P,Math.max(.5,tt/v.k),0,Math.PI*2),n(25,m.fillStyle=V(A[M]),m),n(25,m.globalAlpha=1,m),m.fill(),n(25,m.strokeStyle="black",m),n(25,m.lineWidth=Math.max(1,2/v.k),m),m.stroke();const[st,bt]=[v.applyX(w),v.applyY(P)];let wt=st+12;wt+Jr>R-p.right&&(wt=st-12-Jr);let mt=bt-$r*.5;const pt=p.top+8,T=q-p.bottom-($r+8);mt=Math.max(pt,Math.min(mt,T)),n(7,F=wt),n(8,O=mt)}m.restore()}}function ht(w){const P=h.getBoundingClientRect(),tt=R/P.width,st=q/P.height,bt=(w.clientX-P.left)*tt,wt=(w.clientY-P.top)*st,[mt,pt]=v.invert([bt,wt]),T=_.find(L=>{var Ft,Lt;const W=p.left+u(L.x),ut=p.top+c(L.y),J=W-mt,G=ut-pt,kt=B(L),xt=Math.sqrt(J*J+G*G)<(kt+3)/v.k,St=!!(C&&String(C).trim().length)?je((Ft=L.title)!=null?Ft:"",C)||je((Lt=L.text)!=null?Lt:"",C):!0,Ot=E&&E.size>0&&E.size<r?E.has(L[M]):!0,Xt=z&&U?L.date>=z&&L.date<=U:!0;return xt&&(St&&Ot&&Xt)});T?(n(6,A=T),g=T,n(4,h.style.cursor="pointer",h)):(n(6,A=null),g=null,n(4,h.style.cursor="crosshair",h)),ft()}function Q(w){const P=h.getBoundingClientRect(),tt=R/P.width,st=q/P.height,bt=(w.clientX-P.left)*tt,wt=(w.clientY-P.top)*st,[mt,pt]=v.invert([bt,wt]),T=_.find(W=>{var Lt,jt;const ut=p.left+u(W.x),J=p.top+c(W.y),G=ut-mt,kt=J-pt,xt=B(W),Mt=Math.sqrt(G*G+kt*kt)<(xt+3)/v.k,Et=!!(C&&String(C).trim().length)?je((Lt=W.title)!=null?Lt:"",C)||je((jt=W.text)!=null?jt:"",C):!0,Xt=E&&E.size>0&&E.size<r?E.has(W[M]):!0,At=z&&U?W.date>=z&&W.date<=U:!0;return Mt&&(Et&&Xt&&At)});if(!T)return;const L=T.tweet_url||T.url||T.link||T.href||T.permalink;L&&typeof window<"u"&&window.open(L,"_blank","noopener,noreferrer")}function ot(){n(6,A=g),ft()}let at;Gn(()=>(n(25,m=h.getContext("2d")),rt(),window.ResizeObserver&&(at=new ResizeObserver(()=>{rt(),ft()}),at.observe(b)),I=Cu().scaleExtent([Ru,Du]).filter(w=>{const P=w;return P.type==="wheel"||P.type==="touchstart"||P.type==="touchmove"?!0:P.type==="mousedown"?P.button===0&&!P.ctrlKey&&!P.metaKey&&!P.shiftKey:!P.ctrlKey&&!P.metaKey&&!P.shiftKey}).on("zoom",w=>{v=w.transform,ft()}),x=se(h),x.call(I),ft(),()=>{at&&at.disconnect()}));function j(w,P){var bt;if((bt=P==null?void 0:P.stopPropagation)==null||bt.call(P),!x||!I)return;const tt=R/2,st=q/2;x.transition().duration(200).call(I.scaleBy,w,[tt,st])}function dt(w){j(1.25,w)}function yt(w){j(1/1.25,w)}function _t(w){var P;(P=w==null?void 0:w.stopPropagation)==null||P.call(w),!(!x||!I)&&x.transition().duration(200).call(I.transform,gn)}function ct(w){te[w?"unshift":"push"](()=>{h=w,n(4,h)})}function $(w){te[w?"unshift":"push"](()=>{b=w,n(5,b)})}return t.$$set=w=>{"data"in w&&n(0,_=w.data),"domainColumn"in w&&n(1,M=w.domainColumn),"opacity"in w&&n(16,X=w.opacity),"selectedValues"in w&&n(17,E=w.selectedValues),"searchQuery"in w&&n(18,C=w.searchQuery),"showAnnotations"in w&&n(19,N=w.showAnnotations),"highlightedData"in w&&n(20,Y=w.highlightedData),"startDate"in w&&n(21,z=w.startDate),"endDate"in w&&n(22,U=w.endDate),"uniqueValues"in w&&n(23,lt=w.uniqueValues),"sizeByColumn"in w&&n(24,H=w.sizeByColumn)},t.$$.update=()=>{t.$$.dirty[0]&1048576&&new Set(Y.map(w=>w.id)),t.$$.dirty[0]&3&&(r=new Set(_.map(w=>w[M])).size),t.$$.dirty[0]&4&&n(29,i=R-p.left-p.right),t.$$.dirty[0]&8&&n(26,o=q-p.top-p.bottom),t.$$.dirty[0]&1&&n(31,s=[xr(_,w=>w.x),Dn(_,w=>w.x)]),t.$$.dirty[1]&1&&n(30,a=s[0]===s[1]?[s[0]-1,s[1]+1]:s),t.$$.dirty[0]&1610612736&&(u=en().domain(a).range([0,i])),t.$$.dirty[0]&1&&n(28,l=[xr(_,w=>w.y),Dn(_,w=>w.y)]),t.$$.dirty[0]&268435456&&n(27,f=l[0]===l[1]?[l[0]-1,l[1]+1]:l),t.$$.dirty[0]&201326592&&(c=en().domain(f).range([o,0])),t.$$.dirty[0]&8388610&&n(9,V=yi(_s).domain(M?lt:[])),t.$$.dirty[0]&16777217&&(y=H&&_.length?en().domain([0,Dn(_,w=>+w[H]||0)]).range([Tu,Nu]).clamp(!0):null),t.$$.dirty[0]&1&&_.length&&new Date(Math.min(..._.map(w=>w.date.getTime()))),t.$$.dirty[0]&1&&_.length&&new Date(Math.max(..._.map(w=>w.date.getTime()))),t.$$.dirty[0]&40828931&&m&&_.length&&ft()},[_,M,R,q,h,b,A,F,O,V,ht,Q,ot,dt,yt,_t,X,E,C,N,Y,z,U,lt,H,m,o,f,l,i,a,s,ct,$]}class Iu extends bn{constructor(e){super(),vn(this,e,zu,Eu,_n,{data:0,domainColumn:1,opacity:16,selectedValues:17,searchQuery:18,showAnnotations:19,highlightedData:20,startDate:21,endDate:22,uniqueValues:23,sizeByColumn:24},null,[-1,-1])}}function Ou(t){let e,n,r,i,o,s,a,u,l;return{c(){e=D("div"),n=D("div"),r=D("div"),i=Z(),o=D("div"),s=Z(),a=D("div"),S(r,"class","track-inner svelte-vytkle"),S(n,"class","track svelte-vytkle"),S(o,"class","thumb start-thumb svelte-vytkle"),Rt(o,"left",t[4]+"%"),S(a,"class","thumb end-thumb svelte-vytkle"),Rt(a,"left",t[3]+"%"),S(e,"class","range-slider svelte-vytkle"),Rt(e,"--start-percent",t[4]+"%"),Rt(e,"--end-percent",t[3]+"%")},m(f,c){nt(f,e,c),k(e,n),k(n,r),k(e,i),k(e,o),t[13](o),k(e,s),k(e,a),t[16](a),t[19](e),u||(l=[gt(r,"mousedown",t[11]),gt(r,"touchstart",t[12]),gt(o,"mousedown",t[14]),gt(o,"touchstart",t[15]),gt(a,"mousedown",t[17]),gt(a,"touchstart",t[18])],u=!0)},p(f,[c]){c&16&&Rt(o,"left",f[4]+"%"),c&8&&Rt(a,"left",f[3]+"%"),c&16&&Rt(e,"--start-percent",f[4]+"%"),c&8&&Rt(e,"--end-percent",f[3]+"%")},i:It,o:It,d(f){f&&et(e),t[13](null),t[16](null),t[19](null),u=!1,re(l)}}}function Lu(t,e,n){let r,i,{min:o=0}=e,{max:s=100}=e,{startValue:a}=e,{endValue:u}=e;const l=$i();let f,c,y,_=!1,M=null,X=null,E=0;function C(g,v){_=!0,M=v,X=f.getBoundingClientRect(),v==="range"&&(E=u-a),window.addEventListener("mousemove",N),window.addEventListener("mouseup",Y)}function N(g){if(!_)return;const v=Math.min(Math.max(0,(g.clientX-X.left)/X.width),1),I=Math.round(v*(s-o)+o);if(M==="start")n(7,a=Math.min(I,u)),l("startChange",a);else if(M==="end")n(8,u=Math.max(I,a)),l("endChange",u);else if(M==="range"){let x=I-Math.floor(E/2),F=I+Math.ceil(E/2);x<o&&(x=o,F=o+E),F>s&&(F=s,x=s-E),x=Math.max(o,x),F=Math.min(s,F),n(7,a=x),n(8,u=F),l("startChange",a),l("endChange",u)}}function Y(){_=!1,window.removeEventListener("mousemove",N),window.removeEventListener("mouseup",Y)}function z(g,v){g.preventDefault(),_=!0,M=v,X=f.getBoundingClientRect(),v==="range"&&(E=u-a),window.addEventListener("touchmove",U,{passive:!1}),window.addEventListener("touchend",lt)}function U(g){if(g.preventDefault(),!_)return;const v=g.touches[0],I=Math.min(Math.max(0,(v.clientX-X.left)/X.width),1),x=Math.round(I*(s-o)+o);if(M==="start")n(7,a=Math.min(x,u)),l("startChange",a);else if(M==="end")n(8,u=Math.max(x,a)),l("endChange",u);else if(M==="range"){let F=x-Math.floor(E/2),O=x+Math.ceil(E/2);F<o&&(F=o,O=o+E),O>s&&(O=s,F=s-E),F=Math.max(o,F),O=Math.min(s,O),n(7,a=F),n(8,u=O),l("startChange",a),l("endChange",u)}}function lt(){_=!1,window.removeEventListener("touchmove",U),window.removeEventListener("touchend",lt)}const H=g=>C(g,"range"),d=g=>z(g,"range");function h(g){te[g?"unshift":"push"](()=>{c=g,n(1,c)})}const b=g=>C(g,"start"),m=g=>z(g,"start");function R(g){te[g?"unshift":"push"](()=>{y=g,n(2,y)})}const q=g=>C(g,"end"),p=g=>z(g,"end");function A(g){te[g?"unshift":"push"](()=>{f=g,n(0,f)})}return t.$$set=g=>{"min"in g&&n(9,o=g.min),"max"in g&&n(10,s=g.max),"startValue"in g&&n(7,a=g.startValue),"endValue"in g&&n(8,u=g.endValue)},t.$$.update=()=>{t.$$.dirty&1664&&n(4,r=s>o?(a-o)/(s-o)*100:0),t.$$.dirty&1792&&n(3,i=s>o?(u-o)/(s-o)*100:100)},[f,c,y,i,r,C,z,a,u,o,s,H,d,h,b,m,R,q,p,A]}class Pu extends bn{constructor(e){super(),vn(this,e,Lu,Ou,_n,{min:9,max:10,startValue:7,endValue:8})}}function ti(t,e,n){const r=t.slice();return r[63]=e[n],r}function ei(t,e,n){const r=t.slice();return r[66]=e[n],r}function ni(t){let e,n,r,i,o,s,a=t[12],u=[];for(let l=0;l<a.length;l+=1)u[l]=ri(ei(t,a,l));return{c(){e=D("label"),e.textContent="\u{1F3A8} Color by Column:",n=Z(),r=D("select"),i=D("option"),i.textContent="Select column";for(let l=0;l<u.length;l+=1)u[l].c();S(e,"for","domain-column"),S(e,"class","svelte-bw1h3t"),i.__value="",i.value=i.__value,i.disabled=!0,S(r,"id","domain-column"),S(r,"class","svelte-bw1h3t"),t[0]===void 0&&le(()=>t[38].call(r))},m(l,f){nt(l,e,f),nt(l,n,f),nt(l,r,f),k(r,i);for(let c=0;c<u.length;c+=1)u[c].m(r,null);Qt(r,t[0]),o||(s=[gt(r,"change",t[25]),gt(r,"change",t[38])],o=!0)},p(l,f){if(f[0]&4096){a=l[12];let c;for(c=0;c<a.length;c+=1){const y=ei(l,a,c);u[c]?u[c].p(y,f):(u[c]=ri(y),u[c].c(),u[c].m(r,null))}for(;c<u.length;c+=1)u[c].d(1);u.length=a.length}f[0]&4097&&Qt(r,l[0])},d(l){l&&et(e),l&&et(n),l&&et(r),ai(u,l),o=!1,re(s)}}}function ri(t){let e,n=t[66]+"",r,i;return{c(){e=D("option"),r=vt(n),e.__value=i=t[66],e.value=e.__value},m(o,s){nt(o,e,s),k(e,r)},p(o,s){s[0]&4096&&n!==(n=o[66]+"")&&Dt(r,n),s[0]&4096&&i!==(i=o[66])&&(e.__value=i,e.value=e.__value)},d(o){o&&et(e)}}}function ii(t){let e,n,r,i,o,s=t[1],a=[];for(let u=0;u<s.length;u+=1)a[u]=oi(ti(t,s,u));return{c(){e=D("label"),e.textContent="\u2728 Highlight Values (hold Shift/Cmd to select multiple):",n=Z(),r=D("select");for(let u=0;u<a.length;u+=1)a[u].c();S(e,"for","value-select"),S(e,"class","svelte-bw1h3t"),S(r,"id","value-select"),r.multiple=!0,S(r,"size","5"),S(r,"class","multi-select svelte-bw1h3t")},m(u,l){nt(u,e,l),nt(u,n,l),nt(u,r,l);for(let f=0;f<a.length;f+=1)a[f].m(r,null);i||(o=gt(r,"change",t[26]),i=!0)},p(u,l){if(l[0]&6){s=u[1];let f;for(f=0;f<s.length;f+=1){const c=ti(u,s,f);a[f]?a[f].p(c,l):(a[f]=oi(c),a[f].c(),a[f].m(r,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=s.length}},d(u){u&&et(e),u&&et(n),u&&et(r),ai(a,u),i=!1,o()}}}function oi(t){let e,n=t[63]+"",r,i,o;return{c(){e=D("option"),r=vt(n),e.__value=i=t[63],e.value=e.__value,e.selected=o=t[2].has(t[63])},m(s,a){nt(s,e,a),k(e,r)},p(s,a){a[0]&2&&n!==(n=s[63]+"")&&Dt(r,n),a[0]&2&&i!==(i=s[63])&&(e.__value=i,e.value=e.__value),a[0]&6&&o!==(o=s[2].has(s[63]))&&(e.selected=o)},d(s){s&&et(e)}}}function Fu(t){let e;return{c(){e=vt("\u25B6")},m(n,r){nt(n,e,r)},d(n){n&&et(e)}}}function Vu(t){let e;return{c(){e=vt("\u275A\u275A")},m(n,r){nt(n,e,r)},d(n){n&&et(e)}}}function Bu(t){let e;return{c(){e=D("p"),e.textContent="Waiting for data"},m(n,r){nt(n,e,r)},p:It,i:It,o:It,d(n){n&&et(e)}}}function qu(t){let e,n,r;function i(f,c){return f[19]==="downloading"?Yu:f[19]==="parsing"?Uu:Hu}let o=i(t),s=o(t);function a(f,c){return f[19]==="downloading"?Ku:Wu}let u=a(t),l=u(t);return{c(){e=D("div"),n=D("div"),s.c(),r=Z(),l.c(),S(n,"class","progress-header svelte-bw1h3t"),S(e,"class","progress-wrap svelte-bw1h3t")},m(f,c){nt(f,e,c),k(e,n),s.m(n,null),k(e,r),l.m(e,null)},p(f,c){o!==(o=i(f))&&(s.d(1),s=o(f),s&&(s.c(),s.m(n,null))),u===(u=a(f))&&l?l.p(f,c):(l.d(1),l=u(f),l&&(l.c(),l.m(e,null)))},i:It,o:It,d(f){f&&et(e),s.d(),l.d()}}}function Xu(t){let e,n;return e=new Iu({props:{data:t[14],domainColumn:t[0],selectedValues:t[2],opacity:t[13],searchQuery:t[8],showAnnotations:t[16],highlightedData:t[7],startDate:t[3],endDate:t[4],uniqueValues:t[1],sizeByColumn:t[17]}}),{c(){Zn(e.$$.fragment)},m(r,i){yn(e,r,i),n=!0},p(r,i){const o={};i[0]&16384&&(o.data=r[14]),i[0]&1&&(o.domainColumn=r[0]),i[0]&4&&(o.selectedValues=r[2]),i[0]&8192&&(o.opacity=r[13]),i[0]&256&&(o.searchQuery=r[8]),i[0]&65536&&(o.showAnnotations=r[16]),i[0]&128&&(o.highlightedData=r[7]),i[0]&8&&(o.startDate=r[3]),i[0]&16&&(o.endDate=r[4]),i[0]&2&&(o.uniqueValues=r[1]),i[0]&131072&&(o.sizeByColumn=r[17]),e.$set(o)},i(r){n||(ee(e.$$.fragment,r),n=!0)},o(r){he(e.$$.fragment,r),n=!1},d(r){wn(e,r)}}}function Hu(t){let e;return{c(){e=vt("Loading...")},m(n,r){nt(n,e,r)},d(n){n&&et(e)}}}function Uu(t){let e;return{c(){e=vt("Parsing CSV...")},m(n,r){nt(n,e,r)},d(n){n&&et(e)}}}function Yu(t){let e;return{c(){e=vt("Downloading CSV...")},m(n,r){nt(n,e,r)},d(n){n&&et(e)}}}function Wu(t){let e;return{c(){e=D("div"),S(e,"class","progress-bar indeterminate svelte-bw1h3t")},m(n,r){nt(n,e,r)},p:It,d(n){n&&et(e)}}}function Ku(t){let e;function n(o,s){return o[21]?Gu:Qu}let r=n(t),i=r(t);return{c(){i.c(),e=ui()},m(o,s){i.m(o,s),nt(o,e,s)},p(o,s){r===(r=n(o))&&i?i.p(o,s):(i.d(1),i=r(o),i&&(i.c(),i.m(e.parentNode,e)))},d(o){i.d(o),o&&et(e)}}}function Qu(t){let e,n,r,i=we(t[20])+"",o;return{c(){e=D("div"),n=Z(),r=D("div"),o=vt(i),S(e,"class","progress-bar indeterminate svelte-bw1h3t"),S(r,"class","progress-label svelte-bw1h3t")},m(s,a){nt(s,e,a),nt(s,n,a),nt(s,r,a),k(r,o)},p(s,a){a[0]&1048576&&i!==(i=we(s[20])+"")&&Dt(o,i)},d(s){s&&et(e),s&&et(n),s&&et(r)}}}function Gu(t){let e,n,r,i,o,s,a=we(t[20])+"",u,l,f=we(t[21])+"",c,y;return{c(){e=D("div"),n=D("div"),r=Z(),i=D("div"),o=vt(t[22]),s=vt("% ("),u=vt(a),l=vt(" / "),c=vt(f),y=vt(")"),S(n,"class","progress-fill svelte-bw1h3t"),Rt(n,"width",t[22]+"%"),S(e,"class","progress-bar svelte-bw1h3t"),S(i,"class","progress-label svelte-bw1h3t")},m(_,M){nt(_,e,M),k(e,n),nt(_,r,M),nt(_,i,M),k(i,o),k(i,s),k(i,u),k(i,l),k(i,c),k(i,y)},p(_,M){M[0]&4194304&&Rt(n,"width",_[22]+"%"),M[0]&4194304&&Dt(o,_[22]),M[0]&1048576&&a!==(a=we(_[20])+"")&&Dt(u,a),M[0]&2097152&&f!==(f=we(_[21])+"")&&Dt(c,f)},d(_){_&&et(e),_&&et(r),_&&et(i)}}}function Zu(t){let e,n,r,i,o,s,a,u,l,f,c,y,_,M,X,E,C,N,Y,z,U,lt,H,d,h,b,m,R,q,p,A,g,v,I,x,F,O,V,B,K,rt,ft,ht,Q,ot,at,j,dt,yt,_t,ct,$,w,P,tt,st,bt,wt,mt,pt,T,L,W,ut,J,G,kt,xt,Mt,St,Et,Ot,Xt,At,Ft,Lt=qt(t[3])+"",jt,Se,ge,ae=qt(t[4])+"",Mn,lr,Vt,Me,ar,Ce,ur,_e,fr,Ee,cr,Ae,hr,Re,Bt,Ht,Kt,Cn,dr,Tt=t[12].length&&ni(t),Nt=t[1].length&&ii(t);function Ki(it){t[46](it)}function Qi(it){t[47](it)}let En={min:0,max:t[23]};t[5]!==void 0&&(En.startValue=t[5]),t[6]!==void 0&&(En.endValue=t[6]),St=new Pu({props:En}),te.push(()=>vr(St,"startValue",Ki)),te.push(()=>vr(St,"endValue",Qi)),St.$on("startChange",t[48]),St.$on("endChange",t[49]);function pr(it,Ct){return it[15]?Vu:Fu}let He=pr(t),ie=He(t);const mr=[Xu,qu,Bu],oe=[];function gr(it,Ct){return it[14].length?0:it[18]?1:2}return Bt=gr(t),Ht=oe[Bt]=mr[Bt](t),{c(){e=D("div"),n=D("div"),n.innerHTML=`<h1 class="title svelte-bw1h3t">Semantic Map [DEMO]</h1> 
    <p class="subtitle">Each dot represents an article. When the dots are closer together, the
      articles are similar in meaning.</p>`,r=Z(),i=D("div"),o=D("div"),s=D("div"),a=D("button"),a.textContent="Reset filters",u=Z(),l=D("div"),l.innerHTML=`<details close=""><summary class="svelte-bw1h3t">\u2795 What is a Semantic Map?</summary> 
          <div class="nerd-box-content svelte-bw1h3t"><p class="svelte-bw1h3t">Semantic maps are tools that allow users to visually explore how
              different topics and ideas are connected. By analyzing the
              relationships between articles, these maps can reveal patterns and
              clusters in the data.</p> 
            <p class="svelte-bw1h3t">Newsrooms can use semantic maps to:</p> 
            <ul class="svelte-bw1h3t"><li class="svelte-bw1h3t">Audit their coverage by identifying themes that may be
                underrepresented or overlooked.</li> 
              <li class="svelte-bw1h3t">Track how their editorial focus evolves over time.</li> 
              <li class="svelte-bw1h3t">Discover which topics are being covered by other outlets,
                offering opportunities to adjust their editorial focus or
                collaborate.</li></ul></div></details>`,f=Z(),c=D("label"),c.textContent="\u{1F4C1} Upload CSV:",y=Z(),_=D("input"),M=Z(),X=D("label"),X.textContent="\u{1F50D} Search Text (supports regex):",E=Z(),C=D("input"),N=Z(),Tt&&Tt.c(),Y=Z(),Nt&&Nt.c(),z=Z(),U=D("label"),U.textContent="\u{1F4A1} Adjust Opacity:",lt=Z(),H=D("input"),d=Z(),h=D("label"),h.textContent="Size by:",b=Z(),m=D("select"),R=D("option"),R.textContent="None (uniform size)",q=D("option"),q.textContent="Likes",p=D("option"),p.textContent="Retweets",A=D("option"),A.textContent="Impressions",g=Z(),v=D("label"),v.textContent="Boolean Filters:",I=Z(),x=D("div"),F=D("span"),F.textContent="Is Retweet:",O=Z(),V=D("select"),B=D("option"),B.textContent="Any",K=D("option"),K.textContent="Yes",rt=D("option"),rt.textContent="No",ft=Z(),ht=D("div"),Q=D("span"),Q.textContent="Has Media:",ot=Z(),at=D("select"),j=D("option"),j.textContent="Any",dt=D("option"),dt.textContent="Yes",yt=D("option"),yt.textContent="No",_t=Z(),ct=D("div"),$=D("span"),$.textContent="Is Quote:",w=Z(),P=D("select"),tt=D("option"),tt.textContent="Any",st=D("option"),st.textContent="Yes",bt=D("option"),bt.textContent="No",wt=Z(),mt=D("div"),pt=D("label"),pt.textContent="\u{1F4C5} Date Range:",T=Z(),L=D("input"),J=Z(),G=D("input"),Mt=Z(),Zn(St.$$.fragment),Xt=Z(),At=D("div"),Ft=D("span"),jt=vt(Lt),Se=Z(),ge=D("span"),Mn=vt(ae),lr=Z(),Vt=D("div"),Me=D("button"),Me.textContent="-1W",ar=Z(),Ce=D("button"),Ce.textContent="-1D",ur=Z(),_e=D("button"),ie.c(),fr=Z(),Ee=D("button"),Ee.textContent="+1D",cr=Z(),Ae=D("button"),Ae.textContent="+1W",hr=Z(),Re=D("div"),Ht.c(),S(n,"class","title-section svelte-bw1h3t"),S(a,"class","reset-btn svelte-bw1h3t"),S(s,"class","filter-actions svelte-bw1h3t"),S(l,"class","nerd-box svelte-bw1h3t"),S(c,"for","file-upload"),S(c,"class","svelte-bw1h3t"),S(_,"id","file-upload"),S(_,"type","file"),S(_,"accept",".csv"),S(_,"class","svelte-bw1h3t"),S(X,"for","search-input"),S(X,"class","svelte-bw1h3t"),S(C,"id","search-input"),S(C,"type","text"),S(C,"placeholder","Search or regex pattern..."),S(C,"class","svelte-bw1h3t"),S(U,"for","opacity-slider"),S(U,"class","svelte-bw1h3t"),S(H,"id","opacity-slider"),S(H,"type","range"),S(H,"min","0"),S(H,"max",".3"),S(H,"step","0.01"),S(H,"class","svelte-bw1h3t"),S(h,"for","size-by"),S(h,"class","svelte-bw1h3t"),R.__value="",R.value=R.__value,q.__value="likes",q.value=q.__value,p.__value="retweets",p.value=p.__value,A.__value="impressions",A.value=A.__value,S(m,"id","size-by"),S(m,"class","svelte-bw1h3t"),t[17]===void 0&&le(()=>t[40].call(m)),S(v,"class","svelte-bw1h3t"),S(F,"class","svelte-bw1h3t"),B.__value=null,B.value=B.__value,K.__value=!0,K.value=K.__value,rt.__value=!1,rt.value=rt.__value,S(V,"class","svelte-bw1h3t"),t[9]===void 0&&le(()=>t[41].call(V)),S(x,"class","filter-row svelte-bw1h3t"),S(Q,"class","svelte-bw1h3t"),j.__value=null,j.value=j.__value,dt.__value=!0,dt.value=dt.__value,yt.__value=!1,yt.value=yt.__value,S(at,"class","svelte-bw1h3t"),t[10]===void 0&&le(()=>t[42].call(at)),S(ht,"class","filter-row svelte-bw1h3t"),S($,"class","svelte-bw1h3t"),tt.__value=null,tt.value=tt.__value,st.__value=!0,st.value=st.__value,bt.__value=!1,bt.value=bt.__value,S(P,"class","svelte-bw1h3t"),t[11]===void 0&&le(()=>t[43].call(P)),S(ct,"class","filter-row svelte-bw1h3t"),S(pt,"for","start-date"),S(pt,"class","svelte-bw1h3t"),S(L,"id","start-date"),S(L,"type","date"),L.value=W=qt(t[3]),S(L,"min","2024-01-01"),S(L,"max",ut=qt(t[24])),S(L,"class","svelte-bw1h3t"),S(G,"id","end-date"),S(G,"type","date"),G.value=kt=qt(t[4]),S(G,"min","2024-01-01"),S(G,"max",xt=qt(t[24])),S(G,"class","svelte-bw1h3t"),S(At,"class","date-range-labels svelte-bw1h3t"),S(Me,"class","svelte-bw1h3t"),S(Ce,"class","svelte-bw1h3t"),S(_e,"class","play-button svelte-bw1h3t"),S(Ee,"class","svelte-bw1h3t"),S(Ae,"class","svelte-bw1h3t"),S(Vt,"class","date-navigation svelte-bw1h3t"),S(mt,"class","date-controls svelte-bw1h3t"),S(o,"class","filter-panel svelte-bw1h3t"),S(Re,"class","scatterplot-container svelte-bw1h3t"),S(i,"class","content svelte-bw1h3t"),S(e,"class","container svelte-bw1h3t")},m(it,Ct){nt(it,e,Ct),k(e,n),k(e,r),k(e,i),k(i,o),k(o,s),k(s,a),k(o,u),k(o,l),k(o,f),k(o,c),k(o,y),k(o,_),k(o,M),k(o,X),k(o,E),k(o,C),k(o,N),Tt&&Tt.m(o,null),k(o,Y),Nt&&Nt.m(o,null),k(o,z),k(o,U),k(o,lt),k(o,H),yr(H,t[13]),k(o,d),k(o,h),k(o,b),k(o,m),k(m,R),k(m,q),k(m,p),k(m,A),Qt(m,t[17]),k(o,g),k(o,v),k(o,I),k(o,x),k(x,F),k(x,O),k(x,V),k(V,B),k(V,K),k(V,rt),Qt(V,t[9]),k(o,ft),k(o,ht),k(ht,Q),k(ht,ot),k(ht,at),k(at,j),k(at,dt),k(at,yt),Qt(at,t[10]),k(o,_t),k(o,ct),k(ct,$),k(ct,w),k(ct,P),k(P,tt),k(P,st),k(P,bt),Qt(P,t[11]),k(o,wt),k(o,mt),k(mt,pt),k(mt,T),k(mt,L),k(mt,J),k(mt,G),k(mt,Mt),yn(St,mt,null),k(mt,Xt),k(mt,At),k(At,Ft),k(Ft,jt),k(At,Se),k(At,ge),k(ge,Mn),k(mt,lr),k(mt,Vt),k(Vt,Me),k(Vt,ar),k(Vt,Ce),k(Vt,ur),k(Vt,_e),ie.m(_e,null),k(Vt,fr),k(Vt,Ee),k(Vt,cr),k(Vt,Ae),k(i,hr),k(i,Re),oe[Bt].m(Re,null),Kt=!0,Cn||(dr=[gt(a,"click",t[33]),gt(_,"change",t[28]),gt(C,"input",t[31]),gt(H,"change",t[39]),gt(H,"input",t[39]),gt(H,"input",t[32]),gt(m,"change",t[40]),gt(V,"change",t[41]),gt(at,"change",t[42]),gt(P,"change",t[43]),gt(L,"change",t[44]),gt(G,"change",t[45]),gt(Me,"click",t[50]),gt(Ce,"click",t[51]),gt(_e,"click",t[30]),gt(Ee,"click",t[52]),gt(Ae,"click",t[53])],Cn=!0)},p(it,Ct){it[12].length?Tt?Tt.p(it,Ct):(Tt=ni(it),Tt.c(),Tt.m(o,Y)):Tt&&(Tt.d(1),Tt=null),it[1].length?Nt?Nt.p(it,Ct):(Nt=ii(it),Nt.c(),Nt.m(o,z)):Nt&&(Nt.d(1),Nt=null),Ct[0]&8192&&yr(H,it[13]),Ct[0]&131072&&Qt(m,it[17]),Ct[0]&512&&Qt(V,it[9]),Ct[0]&1024&&Qt(at,it[10]),Ct[0]&2048&&Qt(P,it[11]),(!Kt||Ct[0]&8&&W!==(W=qt(it[3])))&&(L.value=W),(!Kt||Ct[0]&16777216&&ut!==(ut=qt(it[24])))&&S(L,"max",ut),(!Kt||Ct[0]&16&&kt!==(kt=qt(it[4])))&&(G.value=kt),(!Kt||Ct[0]&16777216&&xt!==(xt=qt(it[24])))&&S(G,"max",xt);const Ue={};Ct[0]&8388608&&(Ue.max=it[23]),!Et&&Ct[0]&32&&(Et=!0,Ue.startValue=it[5],wr(()=>Et=!1)),!Ot&&Ct[0]&64&&(Ot=!0,Ue.endValue=it[6],wr(()=>Ot=!1)),St.$set(Ue),(!Kt||Ct[0]&8)&&Lt!==(Lt=qt(it[3])+"")&&Dt(jt,Lt),(!Kt||Ct[0]&16)&&ae!==(ae=qt(it[4])+"")&&Dt(Mn,ae),He!==(He=pr(it))&&(ie.d(1),ie=He(it),ie&&(ie.c(),ie.m(_e,null)));let An=Bt;Bt=gr(it),Bt===An?oe[Bt].p(it,Ct):(hi(),he(oe[An],1,1,()=>{oe[An]=null}),di(),Ht=oe[Bt],Ht?Ht.p(it,Ct):(Ht=oe[Bt]=mr[Bt](it),Ht.c()),ee(Ht,1),Ht.m(Re,null))},i(it){Kt||(ee(St.$$.fragment,it),ee(Ht),Kt=!0)},o(it){he(St.$$.fragment,it),he(Ht),Kt=!1},d(it){it&&et(e),Tt&&Tt.d(),Nt&&Nt.d(),wn(St),ie.d(),oe[Bt].d(),Cn=!1,re(dr)}}}function ju(){try{const t=new URLSearchParams(window.location.search),e=t.get("url"),n=t.get("filename"),r=t.get("bucket");if(e&&/^https?:\/\//i.test(e))return e;if(n){let i="";return r?/^https?:\/\//i.test(r)?i=r:r.includes(".")?i=`https://${r}`:i=`https://${r}.s3.amazonaws.com`:i={BASE_URL:"/semantic-map/",MODE:"production",DEV:!1,PROD:!0}.VITE_S3_BASE_URL||{BASE_URL:"/semantic-map/",MODE:"production",DEV:!1,PROD:!0}.VITE_DATA_BASE_URL||"https://pink-slime-public.s3.amazonaws.com/",i&&!i.endsWith("/")&&(i+="/"),i?i+n:n}return{BASE_URL:"/semantic-map/",MODE:"production",DEV:!1,PROD:!0}.VITE_DATA_URL||"data.csv"}catch(t){return console.warn("Failed to resolve data URL from query params:",t),{BASE_URL:"/semantic-map/",MODE:"production",DEV:!1,PROD:!0}.VITE_DATA_URL||"data.csv"}}function we(t){if(!t||t<=0)return"0 KB";const e=["B","KB","MB","GB","TB"];let n=t,r=0;for(;n>=1024&&r<e.length-1;)n/=1024,r++;const i=r===0?0:1;return`${n.toFixed(i)} ${e[r]}`}function qt(t){return t?t.toISOString().split("T")[0]:""}function Ju(t,e,n){let r,i,o,s="",a=[],u=[],l="timeline_account",f=[],c=new Set,y=.02,_=null,M=null,X=[],E=[],C=0,N=0,Y=!1,z=null,U=[],lt="",H=!1,d=null,h=null,b=null,m="",R=!1,q="idle",p=0,A=0,g=0;Gn(async()=>{try{n(18,R=!0),n(19,q="downloading"),n(20,p=0),n(21,A=0),n(22,g=0),n(34,s=ju());const T=await fetch(s,{mode:"cors",cache:"no-store"});if(!T.ok)throw new Error(`HTTP ${T.status}`);const L=T.headers.get("content-length");n(21,A=L?parseInt(L,10):0);let W="";if(T.body&&T.body.getReader){const ut=T.body.getReader(),J=[];let G=0;for(;;){const{done:Mt,value:St}=await ut.read();if(Mt)break;J.push(St),G+=St.byteLength,n(20,p=G),A&&n(22,g=Math.round(G/A*100))}const kt=new Uint8Array(G);let xt=0;for(const Mt of J)kt.set(Mt,xt),xt+=Mt.byteLength;W=new TextDecoder().decode(kt),console.log("CSV head:",W.split(`
`).slice(0,5).join(`
`))}else W=await T.text();n(19,q="parsing"),await Promise.resolve(v(W)),n(19,q="idle")}catch(T){console.error("Failed to load CSV:",T)}finally{n(18,R=!1)}return()=>{z&&clearInterval(z)}});function v(T){const L=T.split(/\r?\n/);if(L.length>0){const G=L[0].split(",").map(kt=>kt.trim().toLowerCase()).join(",");L[0]=G,T=L.join(`
`)}const W=oo.parse(T,{header:!0}),ut=new Date("2024-01-01");n(35,a=W.data.filter(J=>J.x&&J.y&&J.date).map((J,G)=>({...J,x:+J.x,y:+J.y,date:new Date(J.date),id:G})).filter(J=>J.date>=ut)),n(36,u=W.meta.fields||[]),n(37,E=[...new Set(a.map(J=>J.date.getTime()))].sort((J,G)=>J-G).map(J=>new Date(J))),n(3,_=E[0]),n(4,M=E[E.length-1]),n(5,C=0),n(6,N=E.length-1),O(),l&&n(1,f=[...new Set(a.map(J=>J[l]).filter(J=>J!=null&&J!==""))].sort((J,G)=>String(J).localeCompare(String(G))))}function I(T){n(0,l=T.target.value),n(1,f=l?[...new Set(a.map(L=>L[l]).filter(Boolean))].sort((L,W)=>String(L).localeCompare(String(W))):[]),n(2,c=new Set),n(16,H=!1)}function x(T){const L=[...T.target.selectedOptions].map(ut=>ut.value);L.length===f.length||L.length===0?(n(2,c=new Set),n(7,U=[])):(n(2,c=new Set(L)),n(7,U=a.filter(ut=>c.has(ut[l])&&(!_||ut.date>=_)&&(!M||ut.date<=M)))),n(16,H=!1)}function F(T,L,W=!1){W?(n(3,_=E[T]||E[0]),n(4,M=E[L]||E[E.length-1])):(n(3,_=T),n(4,M=L)),n(16,H=!1),O()}function O(){if(_){const T=_.getTime();n(5,C=Math.max(0,E.findIndex(L=>L.getTime()>=T)))}else n(5,C=0);if(M){const T=M.getTime();let L=-1;for(let W=E.length-1;W>=0;W--)if(E[W].getTime()<=T){L=W;break}n(6,N=L>=0?L:E.length-1)}else n(6,N=E.length-1);C>N&&n(5,C=N),N<C&&n(6,N=C)}function V(T,L){if(T.detail!==void 0)L==="start"?(n(5,C=T.detail),C>N&&n(5,C=N)):(n(6,N=T.detail),N<C&&n(6,N=C)),F(C,N,!0);else{const W=T.target.value?new Date(T.target.value):null;L==="start"?F(W,M):F(_,W),O()}}function B(T){const L=T.target.files[0];if(L){const W=new FileReader;n(16,H=!1),W.onload=ut=>v(ut.target.result),W.readAsText(L)}}function K(T){const L=N-C;let W=C+T,ut=N+T;W<0&&(W=0,ut=Math.min(L,E.length-1)),ut>=E.length&&(ut=E.length-1,W=Math.max(0,ut-L)),n(5,C=W),n(6,N=ut),F(C,N,!0)}function rt(){Y?(clearInterval(z),n(15,Y=!1)):(n(15,Y=!0),n(16,H=!1),z=setInterval(()=>{if(N>=E.length-1){clearInterval(z),n(15,Y=!1);return}K(1)},500))}function ft(T){n(8,lt=T.target.value),n(16,H=!1)}function ht(){n(16,H=!1)}function Q(){Y&&z&&(clearInterval(z),n(15,Y=!1));const T=u.includes("timeline_account")?"timeline_account":i[0]||"";n(0,l=T),n(2,c=new Set),n(7,U=[]),n(8,lt=""),n(16,H=!1),n(9,d=null),n(10,h=null),n(11,b=null),n(17,m=""),n(13,y=.02),n(13,y=+y),E.length?(n(5,C=0),n(6,N=E.length-1),F(C,N,!0)):(n(3,_=null),n(4,M=null),n(5,C=0),n(6,N=0))}function ot(){l=De(this),n(0,l),n(36,u),n(12,i),n(12,i),n(36,u)}function at(){y=Zi(this.value),n(13,y)}function j(){m=De(this),n(17,m)}function dt(){d=De(this),n(9,d)}function yt(){h=De(this),n(10,h)}function _t(){b=De(this),n(11,b)}const ct=T=>V(T,"start"),$=T=>V(T,"end");function w(T){C=T,n(5,C)}function P(T){N=T,n(6,N)}const tt=T=>V(T,"start"),st=T=>V(T,"end"),bt=()=>K(-7),wt=()=>K(-1),mt=()=>K(1),pt=()=>K(7);return t.$$.update=()=>{if(t.$$.dirty[1]&8&&/^https?:\/\//i.test(s),t.$$.dirty[0]&128&&new Set(U.map(T=>T.id)),t.$$.dirty[1]&64&&E.length>0&&E[0],t.$$.dirty[1]&64&&n(24,r=E.length>0?E[E.length-1]:null),t.$$.dirty[1]&32&&n(12,i=u.filter(T=>T==="timeline_account"||T==="author")),t.$$.dirty[0]&4097|t.$$.dirty[1]&32&&(!u||u.length===0||(i.length&&!i.includes(l)?n(0,l=i[0]):i.length===0&&n(0,l=""))),t.$$.dirty[0]&3967|t.$$.dirty[1]&80){const T=E.length&&C===0&&N===E.length-1,L=c.size>0&&c.size<f.length,W=lt&&lt.trim().length>0,J=!T||L||W||(d!==null||h!==null||b!==null);n(14,X=a.map(G=>{var Lt,jt,Se,ge;const kt=(!_||G.date>=_)&&(!M||G.date<=M),xt=L?c.has(G[l]):!0;let Mt=!0;if(W)try{const ae=new RegExp(lt,"i");Mt=ae.test((Lt=G.title)!=null?Lt:"")||ae.test((jt=G.text)!=null?jt:"")}catch{Mt=((Se=G.title)!=null?Se:"").toLowerCase().includes(lt.toLowerCase())||((ge=G.text)!=null?ge:"").toLowerCase().includes(lt.toLowerCase())}const St=d===null||String(G.is_retweet).toLowerCase()==="true"===d,Et=h===null||String(G.has_media).toLowerCase()==="true"===h,Ot=b===null||String(G.is_quote).toLowerCase()==="true"===b,Xt=St&&Et&&Ot;let At=!1,Ft=!1;return J?(At=kt&&xt&&Mt&&Xt,Ft=kt&&xt&&Mt&&Xt):(At=!1,Ft=!1),{...G,isActive:At,isHighlighted:Ft}}))}t.$$.dirty[0]&32|t.$$.dirty[1]&64&&E.length>1&&C/(E.length-1)*100,t.$$.dirty[0]&64|t.$$.dirty[1]&64&&E.length>1&&N/(E.length-1)*100,t.$$.dirty[1]&64&&n(23,o=E.length>0?E.length-1:0)},[l,f,c,_,M,C,N,U,lt,d,h,b,i,y,X,Y,H,m,R,q,p,A,g,o,r,I,x,V,B,K,rt,ft,ht,Q,s,a,u,E,ot,at,j,dt,yt,_t,ct,$,w,P,tt,st,bt,wt,mt,pt]}class $u extends bn{constructor(e){super(),vn(this,e,Ju,Zu,_n,{},null,[-1,-1,-1])}}new $u({target:document.getElementById("app")});
